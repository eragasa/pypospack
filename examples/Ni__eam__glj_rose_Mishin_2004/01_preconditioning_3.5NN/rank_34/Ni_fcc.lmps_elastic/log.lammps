LAMMPS (11 Aug 2017)
include init.mod
# ---- init.mod file
variable up equal 1.0e-6
units metal
dimension 3
boundary p p p
atom_style atomic
atom_modify map array
variable cfac equal 1.0e-4
variable cunits string GPa
# ---- define minimization parameters
variable etol equal 0.0
variable ftol equal 1.0e-10
variable maxiter equal 100
variable maxeval equal 1000
variable dmax equal 1.0e-2
# --- read data structure
read_data lammps.structure
  triclinic box = (0 0 0) to (3.5167 3.5167 3.5167) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  reading atoms ...
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no
# ---- Compute initial state
fix 3 all box/relax aniso 0.0
minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
       0            0   -17.920206    42294.931    42294.931    42294.931    42294.931 2.3101335e-11 -1.9002118e-11 -1.1197224e-11       3.5167       3.5167       3.5167    43.491658 
       1            0   -17.920548    41672.183    41672.183    41672.183    41672.183 -3.5859589e-11 4.2876733e-11 3.7143232e-11    3.5170517    3.5170517    3.5170517    43.504707 
       2            0   -17.920885    41054.649    41054.649    41054.649    41054.649 -1.1770336e-10 -1.9102912e-10 1.6055763e-10    3.5174033    3.5174033    3.5174033    43.517758 
       3            0   -17.921217    40443.693    40443.693    40443.693    40443.693 4.0299209e-11 9.182242e-11 5.8111817e-11     3.517755     3.517755     3.517755    43.530812 
       4            0   -17.921544    39839.293    39839.293    39839.293    39839.293 1.6325281e-10 -9.3491076e-11 -6.8466499e-11    3.5181067    3.5181067    3.5181067    43.543869 
       5            0   -17.921867    39236.585    39236.585    39236.585    39236.585 3.8052161e-11 6.0796718e-11 5.5330562e-11    3.5184583    3.5184583    3.5184583    43.556928 
       6            0   -17.922184    38628.376    38628.376    38628.376    38628.376 -3.3591645e-12 -1.009179e-13 6.4138933e-12      3.51881      3.51881      3.51881     43.56999 
       7            0   -17.922496    38014.644    38014.644    38014.644    38014.644 -1.1334254e-10 -6.7739954e-11 -4.4272366e-11    3.5191617    3.5191617    3.5191617    43.583054 
       8            0   -17.922804     37395.93     37395.93     37395.93     37395.93 -3.3572444e-11 2.0244946e-12 -3.7567642e-11    3.5195134    3.5195134    3.5195134    43.596122 
       9            0   -17.923107    36780.988    36780.988    36780.988    36780.988 -7.4587221e-13 2.9691614e-11 5.5032971e-12     3.519865     3.519865     3.519865    43.609191 
      10            0   -17.923404    36172.929    36172.929    36172.929    36172.929 -4.3902867e-11 -3.7909242e-11 -2.9523681e-11    3.5202167    3.5202167    3.5202167    43.622263 
      11            0   -17.923697    35571.732    35571.732    35571.732    35571.732 4.3598421e-12 -4.4906025e-11 -3.6310744e-11    3.5205684    3.5205684    3.5205684    43.635338 
      12            0   -17.923985    34974.782    34974.782    34974.782    34974.782  -3.8233e-10 -3.048096e-10 2.9792904e-11      3.52092      3.52092      3.52092    43.648416 
      13            0   -17.924268    34374.418    34374.418    34374.418    34374.418 -4.4551205e-11 -1.2787102e-11 -2.1394142e-11    3.5212717    3.5212717    3.5212717    43.661496 
      14            0   -17.924546    33770.304    33770.304    33770.304    33770.304 -4.8458546e-11 -7.1278522e-11 -8.3517396e-11    3.5216234    3.5216234    3.5216234    43.674579 
      15            0   -17.924819    33162.457    33162.457    33162.457    33162.457 1.7226707e-10 -1.4740711e-10 -1.6424495e-10     3.521975     3.521975     3.521975    43.687664 
      16            0   -17.925088    32555.616    32555.616    32555.616    32555.616 1.0660444e-11 4.3402111e-11 6.214127e-11    3.5223267    3.5223267    3.5223267    43.700752 
      17            0   -17.925351    31950.444    31950.444    31950.444    31950.444 -2.8809606e-11 -2.4485937e-11 -1.1626104e-11    3.5226784    3.5226784    3.5226784    43.713843 
      18            0    -17.92561    31346.612    31346.612    31346.612    31346.612 -1.5516701e-10 -2.2509328e-10 -1.3809536e-10    3.5230301    3.5230301    3.5230301    43.726936 
      19            0   -17.925864    30743.535    30743.535    30743.535    30743.535 5.5732652e-11 1.0472904e-11 9.5227507e-12    3.5233817    3.5233817    3.5233817    43.740032 
      20            0   -17.926113    30141.221    30141.221    30141.221    30141.221 -2.3387067e-11 -8.0386089e-11 -7.8706946e-11    3.5237334    3.5237334    3.5237334     43.75313 
      21            0   -17.926357    29543.759    29543.759    29543.759    29543.759 2.2165024e-12 -1.4096536e-10 2.616702e-11    3.5240851    3.5240851    3.5240851    43.766231 
      22            0   -17.926596    28951.136    28951.136    28951.136    28951.136 -1.1038959e-10 5.2971205e-11 3.5380391e-11    3.5244367    3.5244367    3.5244367    43.779335 
      23            0    -17.92683    28362.861    28362.861    28362.861    28362.861 -1.6619738e-11 -6.5992295e-12 -2.0818971e-11    3.5247884    3.5247884    3.5247884    43.792441 
      24            0    -17.92706    27771.516    27771.516    27771.516    27771.516 -9.4445559e-11 -7.8058467e-12 -1.6321136e-11    3.5251401    3.5251401    3.5251401     43.80555 
      25            0   -17.927285    27175.002    27175.002    27175.002    27175.002 6.6659589e-11 -1.3270044e-10 -1.609102e-10    3.5254917    3.5254917    3.5254917    43.818662 
      26            0   -17.927505     26573.34     26573.34     26573.34     26573.34 -1.208168e-10 6.1932851e-12 -1.3715486e-10    3.5258434    3.5258434    3.5258434    43.831776 
      27            0    -17.92772    25968.651    25968.651    25968.651    25968.651 4.0192527e-11 6.2151788e-11 7.9665415e-11    3.5261951    3.5261951    3.5261951    43.844892 
      28            0    -17.92793    25370.025    25370.025    25370.025    25370.025 1.0608122e-10 1.7082551e-10 1.5242832e-10    3.5265468    3.5265468    3.5265468    43.858012 
      29            0   -17.928135    24778.236    24778.236    24778.236    24778.236 -1.4605969e-10 1.1836098e-11 -8.189634e-12    3.5268984    3.5268984    3.5268984    43.871134 
      30            0   -17.928336    24193.364    24193.364    24193.364    24193.364 -5.4061649e-11 2.7435177e-11 2.6965002e-11    3.5272501    3.5272501    3.5272501    43.884258 
      31            0   -17.928532    23609.115    23609.115    23609.115    23609.115 2.1329259e-11 5.674002e-11 4.3903536e-11    3.5276018    3.5276018    3.5276018    43.897386 
      32            0   -17.928723    23011.735    23011.735    23011.735    23011.735 -2.9000044e-11 1.1919363e-10 -4.6598387e-11    3.5279534    3.5279534    3.5279534    43.910515 
      33            0   -17.928909    22401.276    22401.276    22401.276    22401.276 1.2623772e-10 1.1816262e-10 -8.7810432e-11    3.5283051    3.5283051    3.5283051    43.923648 
      34            0    -17.92909    21779.504    21779.504    21779.504    21779.504 -1.0049394e-11 1.3459155e-11 -1.1899956e-11    3.5286568    3.5286568    3.5286568    43.936783 
      35            0   -17.929266    21165.414    21165.414    21165.414    21165.414 -1.3313052e-10 -7.6553214e-11 -6.06193e-11    3.5290084    3.5290084    3.5290084    43.949921 
      36            0   -17.929437    20563.871    20563.871    20563.871    20563.871 -1.0523145e-10 2.4395163e-12 2.3409824e-12    3.5293601    3.5293601    3.5293601    43.963061 
      37            0   -17.929603    19974.828    19974.828    19974.828    19974.828 9.1195238e-11 1.0338905e-10 -6.6370144e-11    3.5297118    3.5297118    3.5297118    43.976204 
      38            0   -17.929765    19391.966    19391.966    19391.966    19391.966 1.4367136e-10 -5.2594537e-11 -7.3571687e-11    3.5300635    3.5300635    3.5300635    43.989349 
      39            0   -17.929922    18809.186    18809.186    18809.186    18809.186 -9.8019567e-11 -1.0030938e-10 -2.677399e-12    3.5304151    3.5304151    3.5304151    44.002498 
      40            0   -17.930074    18229.477    18229.477    18229.477    18229.477 -5.2930076e-11 -6.7880022e-12 -1.4522798e-11    3.5307668    3.5307668    3.5307668    44.015648 
      41            0   -17.930221    17652.831    17652.831    17652.831    17652.831 -2.7250973e-10 -4.2789735e-11 -6.4193788e-11    3.5311185    3.5311185    3.5311185    44.028802 
      42            0   -17.930364     17079.76     17079.76     17079.76     17079.76 8.4450129e-11 7.7304952e-11 7.9303283e-11    3.5314701    3.5314701    3.5314701    44.041958 
      43            0   -17.930502    16503.312    16503.312    16503.312    16503.312  1.96109e-10 1.8201264e-10 -1.2708425e-10    3.5318218    3.5318218    3.5318218    44.055116 
      44            0   -17.930635    15922.665    15922.665    15922.665    15922.665 -3.8989912e-11 7.7308547e-12 -1.2366165e-12    3.5321735    3.5321735    3.5321735    44.068278 
      45            0   -17.930763    15337.929    15337.929    15337.929    15337.929 8.1988963e-12 3.0189479e-11 3.5679382e-11    3.5325251    3.5325251    3.5325251    44.081441 
      46            0   -17.930887    14754.873    14754.873    14754.873    14754.873 6.6371662e-12 -2.2594815e-11 -1.8734404e-11    3.5328768    3.5328768    3.5328768    44.094608 
      47            0   -17.931006    14175.337    14175.337    14175.337    14175.337 -2.5001632e-10 -2.0164396e-10 4.1598836e-11    3.5332285    3.5332285    3.5332285    44.107777 
      48            0    -17.93112    13599.311    13599.311    13599.311    13599.311 -1.3162813e-11 3.5925245e-11 4.1818459e-11    3.5335802    3.5335802    3.5335802    44.120949 
      49            0   -17.931229    13026.023    13026.023    13026.023    13026.023 -1.5496121e-10 -1.7798299e-10 -1.7351166e-10    3.5339318    3.5339318    3.5339318    44.134123 
      50            0   -17.931334    12452.562    12452.562    12452.562    12452.562 -1.5941585e-11 -1.4610811e-11 -1.3825092e-11    3.5342835    3.5342835    3.5342835      44.1473 
      51            0   -17.931434    11879.845    11879.845    11879.845    11879.845 -8.5838573e-11 -8.5655201e-11 6.8387813e-11    3.5346352    3.5346352    3.5346352     44.16048 
      52            0    -17.93153    11307.865    11307.865    11307.865    11307.865 -3.1577501e-10 -1.0660614e-10 -1.0872976e-10    3.5349868    3.5349868    3.5349868    44.173662 
      53            0    -17.93162     10737.51     10737.51     10737.51     10737.51 1.0679338e-10 -2.9614022e-11 -5.0183406e-11    3.5353385    3.5353385    3.5353385    44.186847 
      54            0   -17.931706    10166.578    10166.578    10166.578    10166.578 4.7380401e-11 -3.6872953e-11 -2.6842361e-11    3.5356902    3.5356902    3.5356902    44.200034 
      55            0   -17.931788    9593.6386    9593.6386    9593.6386    9593.6386 -1.067703e-12 -9.809915e-13 -1.6173468e-12    3.5360418    3.5360418    3.5360418    44.213224 
      56            0   -17.931864     9018.703     9018.703     9018.703     9018.703 1.4717172e-11 -1.229249e-12 1.2575898e-11    3.5363935    3.5363935    3.5363935    44.226417 
      57            0   -17.931936    8442.7944    8442.7944    8442.7944    8442.7944 -2.2387404e-10 8.1052242e-11 5.8058216e-11    3.5367452    3.5367452    3.5367452    44.239613 
      58            0   -17.932003    7871.7556    7871.7556    7871.7556    7871.7556 7.9559125e-13 1.5226972e-11 -4.5429938e-12    3.5370969    3.5370969    3.5370969    44.252811 
      59            0   -17.932066    7306.1894    7306.1894    7306.1894    7306.1894 -1.0018462e-11 -1.209951e-11 9.259744e-12    3.5374485    3.5374485    3.5374485    44.266011 
      60            0   -17.932124    6746.0777    6746.0777    6746.0777    6746.0777 1.8181928e-10 1.3486062e-10 8.3478717e-11    3.5378002    3.5378002    3.5378002    44.279214 
      61            0   -17.932177    6186.7125    6186.7125    6186.7125    6186.7125 -2.2072408e-10 -3.8023705e-11 -2.0089725e-10    3.5381519    3.5381519    3.5381519     44.29242 
      62            0   -17.932226    5624.6849    5624.6849    5624.6849    5624.6849 -8.5492882e-11 2.1860871e-11 -1.5685464e-10    3.5385035    3.5385035    3.5385035    44.305629 
      63            0    -17.93227    5060.0499    5060.0499    5060.0499    5060.0499 6.8070939e-12 -2.5198925e-11 -4.6308938e-11    3.5388552    3.5388552    3.5388552     44.31884 
      64            0   -17.932309    4493.4064    4493.4064    4493.4064    4493.4064 -7.9810953e-11 1.8742918e-11 1.6483992e-11    3.5392069    3.5392069    3.5392069    44.332053 
      65            0   -17.932344    3928.6015    3928.6015    3928.6015    3928.6015 -2.8959851e-11 -6.4153586e-11 -4.1282774e-11    3.5395585    3.5395585    3.5395585     44.34527 
      66            0   -17.932374    3363.5607    3363.5607    3363.5607    3363.5607 -2.6362157e-11 3.2960329e-11 2.8380187e-11    3.5399102    3.5399102    3.5399102    44.358489 
      67            0     -17.9324     2798.289     2798.289     2798.289     2798.289 -1.6727712e-10 -1.809918e-10 -2.0599028e-10    3.5402619    3.5402619    3.5402619     44.37171 
      68            0    -17.93242    2231.9856    2231.9856    2231.9856    2231.9856 3.2796098e-11 5.0845154e-11 3.5294401e-11    3.5406136    3.5406136    3.5406136    44.384935 
      69            0   -17.932436    1668.3908    1668.3908    1668.3908    1668.3908 -1.0286027e-10 1.4764596e-11 5.4059907e-12    3.5409652    3.5409652    3.5409652    44.398162 
      70            0   -17.932448    1110.9641    1110.9641    1110.9641    1110.9641 7.017994e-11 1.4535895e-10 1.0190401e-11    3.5413169    3.5413169    3.5413169    44.411391 
      71            0   -17.932455    559.68674    559.68674    559.68674    559.68674 -8.7825113e-12 -1.9384967e-11 -1.912323e-11    3.5416686    3.5416686    3.5416686    44.424623 
      72            0   -17.932457    13.075916    13.075916    13.075916    13.075916 -6.7486851e-11 -9.3613618e-12 8.049276e-12    3.5420202    3.5420202    3.5420202    44.437858 
      73            0   -17.932457   -201.09421   -201.09421   -201.09421   -201.09421 -4.7771914e-11 -1.7975869e-10 -3.0330688e-11    3.5421575    3.5421575    3.5421575    44.443023 
      74            0   -17.932461   -753.39611   -753.39611   -753.39611   -753.39611 -1.5662987e-10 -1.5095232e-10 -9.2725861e-11    3.5425091    3.5425091    3.5425091    44.456261 
      75            0   -17.932466   -200.82434   -200.82434   -200.82434   -200.82434 1.1084765e-10 3.0489107e-11 -8.8435986e-11    3.5421575    3.5421575    3.5421575    44.443023 
      76            0   -17.932469    346.66042    346.66042    346.66042    346.66042 -5.5217498e-11 9.1673194e-11 2.479099e-10    3.5418058    3.5418058    3.5418058    44.429787 
      77            0   -17.932716   -192.69339   -192.69339   -192.69339   -192.69339 -5.7086232e-11 2.2869169e-10 -1.0967817e-10    3.5421575    3.5421575    3.5421575    44.443023 
      78            0   -17.937883   -574.79147   -574.79147   -574.79147   -574.79147 6.3023314e-11 -3.7954148e-11 1.5251443e-10    3.5425091    3.5425091    3.5425091    44.456261 
      79            0   -17.971461    -36.65871    -36.65871    -36.65871    -36.65871 9.8909745e-11 -7.931488e-11 3.542783e-10    3.5428608    3.5428608    3.5428608    44.469502 
      80            0   -18.039494     1695.003     1695.003     1695.003     1695.003 2.2863214e-10 -4.7296828e-10 -2.8836711e-10    3.5432125    3.5432125    3.5432125    44.482746 
      81            0   -18.100928    3181.8976    3181.8976    3181.8976    3181.8976 1.9831787e-10 -4.6049857e-10 -5.3556245e-10    3.5435641    3.5435641    3.5435641    44.495992 
      82            0   -18.126534     3479.389     3479.389     3479.389     3479.389 2.9359204e-10 -7.3064151e-10 -2.6349692e-10    3.5439158    3.5439158    3.5439158    44.509241 
      83            0   -18.133816    3163.7653    3163.7653    3163.7653    3163.7653 8.0605567e-10 -4.7538652e-10 -7.5912801e-10    3.5442675    3.5442675    3.5442675    44.522493 
      84            0   -18.139774    2804.7328    2804.7328    2804.7328    2804.7328 5.1131623e-10 -1.3675133e-11 -6.0859691e-10    3.5446192    3.5446192    3.5446192    44.535747 
      85            0   -18.146645    2476.3379    2476.3379    2476.3379    2476.3379 5.9427384e-10 -3.0564003e-10 -1.5088141e-10    3.5449708    3.5449708    3.5449708    44.549004 
      86            0   -18.154687    2187.2606    2187.2606    2187.2606    2187.2606 7.4749471e-10 -8.8689729e-10 2.0620238e-11    3.5453225    3.5453225    3.5453225    44.562263 
      87            0   -18.164144    1945.3664    1945.3664    1945.3664    1945.3664 3.4424209e-10 -8.3968414e-10 -3.0047399e-10    3.5456742    3.5456742    3.5456742    44.575525 
      88            0   -18.175245    1757.8345    1757.8345    1757.8345    1757.8345 7.4038816e-10 -7.2244977e-10 -5.719063e-10    3.5460258    3.5460258    3.5460258     44.58879 
      89            0   -18.188142    1629.7894    1629.7894    1629.7894    1629.7894 2.353139e-10 -1.0716119e-09 -3.1477753e-10    3.5463775    3.5463775    3.5463775    44.602057 
      90            0    -18.20287    1562.8867    1562.8867    1562.8867    1562.8867 7.1749859e-10 -5.2516732e-10 -1.3476532e-10    3.5467292    3.5467292    3.5467292    44.615327 
      91            0   -18.219108    1545.8787    1545.8787    1545.8787    1545.8787 5.7029183e-10 -4.9766693e-10 -3.3901104e-10    3.5470808    3.5470808    3.5470808      44.6286 
      92            0   -18.236549    1568.5473    1568.5473    1568.5473    1568.5473 1.0216654e-09 -5.1277541e-10 -3.2503705e-10    3.5474325    3.5474325    3.5474325    44.641875 
      93            0    -18.25482    1617.6422    1617.6422    1617.6422    1617.6422 6.7318182e-10 -6.5122164e-10 -4.1830466e-10    3.5477842    3.5477842    3.5477842    44.655153 
      94            0   -18.273632    1688.3087    1688.3087    1688.3087    1688.3087 8.0222327e-10 -5.7178735e-10 3.4613093e-12    3.5481359    3.5481359    3.5481359    44.668433 
      95            0   -18.292733    1773.6994    1773.6994    1773.6994    1773.6994 9.3661778e-10 -8.4289195e-10 -4.2669502e-11    3.5484875    3.5484875    3.5484875    44.681716 
      96            0   -18.311954    1863.6475    1863.6475    1863.6475    1863.6475 1.0945747e-09 -6.2278216e-10 -8.4301463e-10    3.5488392    3.5488392    3.5488392    44.695002 
      97            0   -18.331242    1946.0735    1946.0735    1946.0735    1946.0735 7.7008048e-10 -8.7435966e-10 -4.0440891e-10    3.5491909    3.5491909    3.5491909    44.708291 
      98            0   -18.350668    2025.3639    2025.3639    2025.3639    2025.3639 1.0515203e-09 -8.1986036e-10 -1.9868571e-10    3.5495425    3.5495425    3.5495425    44.721582 
      99            0   -18.370263    2114.7079    2114.7079    2114.7079    2114.7079 7.5120074e-10 -1.3447405e-09 -3.1125223e-10    3.5498942    3.5498942    3.5498942    44.734875 
     100            0   -18.389932    2211.1408    2211.1408    2211.1408    2211.1408 9.3008687e-10 -8.5301357e-10 -8.7455889e-10    3.5502459    3.5502459    3.5502459    44.748172 
Loop time of 0.0111611 on 1 procs for 100 steps with 4 atoms

99.5% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = max iterations
  Energy initial, next-to-last, final = 
        -17.9202063118     -18.3702626381     -18.3899317042
  Force two-norm initial, final = 1.98859 3.44968
  Force max component initial, final = 1.14811 0.995368
  Final line search alpha, max atom move = 0.00166924 0.0016615
  Iterations, force evaluations = 100 101

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.0069282  | 0.0069282  | 0.0069282  |   0.0 | 62.07
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.00082159 | 0.00082159 | 0.00082159 |   0.0 |  7.36
Output  | 0.00086999 | 0.00086999 | 0.00086999 |   0.0 |  7.79
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.002541   |            |       | 22.77

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1684 ave 1684 max 1684 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1060 ave 1060 max 1060 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1060
Ave neighs/atom = 265
Neighbor list builds = 0
Dangerous builds = 0

variable tmp equal pxx
variable pxx0 equal ${tmp}
variable pxx0 equal 2211.14081329643
variable tmp equal pyy
variable pyy0 equal ${tmp}
variable pyy0 equal 2211.14081310042
variable tmp equal pzz
variable pzz0 equal ${tmp}
variable pzz0 equal 2211.1408131706
variable tmp equal pyz
variable pyz0 equal ${tmp}
variable pyz0 equal -8.74558890142864e-10
variable tmp equal pxz
variable pxz0 equal ${tmp}
variable pxz0 equal -8.53013568018734e-10
variable tmp equal pxy
variable pxy0 equal ${tmp}
variable pxy0 equal 9.30086867158247e-10

variable tmp equal lx
variable lx0 equal ${tmp}
variable lx0 equal 3.55024587357023
variable tmp equal ly
variable ly0 equal ${tmp}
variable ly0 equal 3.55024587356922
variable tmp equal lz
variable lz0 equal ${tmp}
variable lz0 equal 3.55024587356973

 # ---- define the derivatives w.r.t. strain components
variable d1 equal -(v_pxx1-${pxx0})/(v_delta/v_len0)*${cfac}
variable d1 equal -(v_pxx1-2211.14081329643)/(v_delta/v_len0)*${cfac}
variable d1 equal -(v_pxx1-2211.14081329643)/(v_delta/v_len0)*0.0001
variable d2 equal -(v_pyy1-${pyy0})/(v_delta/v_len0)*${cfac}
variable d2 equal -(v_pyy1-2211.14081310042)/(v_delta/v_len0)*${cfac}
variable d2 equal -(v_pyy1-2211.14081310042)/(v_delta/v_len0)*0.0001
variable d3 equal -(v_pzz1-${pzz0})/(v_delta/v_len0)*${cfac}
variable d3 equal -(v_pzz1-2211.1408131706)/(v_delta/v_len0)*${cfac}
variable d3 equal -(v_pzz1-2211.1408131706)/(v_delta/v_len0)*0.0001
variable d4 equal -(v_pyz1-${pyz0})/(v_delta/v_len0)*${cfac}
variable d4 equal -(v_pyz1--8.74558890142864e-10)/(v_delta/v_len0)*${cfac}
variable d4 equal -(v_pyz1--8.74558890142864e-10)/(v_delta/v_len0)*0.0001
variable d5 equal -(v_pxz1-${pxz0})/(v_delta/v_len0)*${cfac}
variable d5 equal -(v_pxz1--8.53013568018734e-10)/(v_delta/v_len0)*${cfac}
variable d5 equal -(v_pxz1--8.53013568018734e-10)/(v_delta/v_len0)*0.0001
variable d6 equal -(v_pxy1-${pxy0})/(v_delta/v_len0)*${cfac}
variable d6 equal -(v_pxy1-9.30086867158247e-10)/(v_delta/v_len0)*${cfac}
variable d6 equal -(v_pxy1-9.30086867158247e-10)/(v_delta/v_len0)*0.0001

# ---- write restart files
unfix 3
write_restart restart.equil
# ---- uxx Perturbation
variable dir equal 1
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
variable len0 equal ${lx0}
variable len0 equal 3.55024587357023
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
read_restart restart.equil remap
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1e-06*${len0}
variable delta equal -1e-06*3.55024587357023
if "${dir} == 1" then    "change_box all x delta 0 ${delta} remap units box"
change_box all x delta 0 ${delta} remap units box
change_box all x delta 0 -3.55024587357023e-06 remap units box
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
if "${dir} == 2" then    "change_box all y delta 0 ${delta} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     100            0   -18.389932    2212.9985    2212.8848    2213.0554    2213.0554 1.0360861e-09 -1.2975663e-09 -8.4859207e-10    3.5502423    3.5502459    3.5502459    44.748127 
     101            0   -20.437167    73530.744     73530.67    73530.781    73530.781 2.3846883e-09 -2.2166102e-09 -2.3427487e-09    3.5502423    3.5502459    3.5502459    44.748127 
     102            0   -24.323638    227847.68    227847.82    227847.61    227847.61 2.7090758e-09 -2.1669312e-09 -2.9772292e-09    3.5502423    3.5502459    3.5502459    44.748127 
     103            0   -29.703612    497432.57    497433.13    497432.29    497432.29 1.1220695e-09 -1.0377646e-09 -9.7182973e-10    3.5502423    3.5502459    3.5502459    44.748127 
     104            0   -34.705054    897471.02    897471.99    897470.54    897470.54 -8.6317928e-11 2.6073595e-10 -4.8408059e-10    3.5502423    3.5502459    3.5502459    44.748127 
     105            0   -35.829404    1125927.9    1125928.8    1125927.5    1125927.5 -2.9564233e-09 4.4533187e-09 3.3314118e-09    3.5502423    3.5502459    3.5502459    44.748127 
     106            0   -35.873563    1164467.3      1164468      1164467      1164467 6.0792749e-10 1.2847506e-09 -2.3346369e-12    3.5502423    3.5502459    3.5502459    44.748127 
     107            0   -35.877929    1176223.8    1176224.2    1176223.5    1176223.5 -8.1094357e-09 5.3651982e-09 6.4056259e-09    3.5502423    3.5502459    3.5502459    44.748127 
     108            0   -35.878438    1180233.6    1180233.8    1180233.5    1180233.5 1.4292569e-08 -1.024497e-08 -1.106919e-08    3.5502423    3.5502459    3.5502459    44.748127 
     109            0   -35.878486    1181596.7    1181596.5    1181596.7    1181596.7 8.5620498e-09 -7.3980735e-09 -5.4780824e-09    3.5502423    3.5502459    3.5502459    44.748127 
     110            0   -35.878488    1181525.5    1181524.9    1181525.8    1181525.8 2.3185726e-08 -1.7260944e-08 -1.4703232e-08    3.5502423    3.5502459    3.5502459    44.748127 
     111            0   -35.878491    1181346.3    1181345.1    1181346.8    1181346.8 1.2779755e-08 -1.0589287e-08 -9.3813088e-09    3.5502423    3.5502459    3.5502459    44.748127 
     112            0   -35.878493    1182149.2    1182147.6    1182150.1    1182150.1 -1.8070545e-08 1.6925942e-08 1.2802336e-08    3.5502423    3.5502459    3.5502459    44.748127 
     113            0   -35.878494    1182070.8      1182069    1182071.7    1182071.7 -1.9251048e-08 1.7391291e-08 1.3803136e-08    3.5502423    3.5502459    3.5502459    44.748127 
     114            0   -35.878494    1181845.2    1181843.1    1181846.2    1181846.2 -3.2577257e-08 2.6750149e-08 2.2809021e-08    3.5502423    3.5502459    3.5502459    44.748127 
     115            0   -35.878494    1181821.1    1181818.9    1181822.2    1181822.2 -2.8227919e-08 2.3451925e-08 1.9033869e-08    3.5502423    3.5502459    3.5502459    44.748127 
     116            0   -35.878494    1181805.4    1181802.5    1181806.9    1181806.9 -2.1807901e-08 1.6709681e-08 1.7575386e-08    3.5502423    3.5502459    3.5502459    44.748127 
     117            0   -35.878494    1181820.3      1181817      1181822      1181822 -2.1522351e-08 1.5740363e-08 1.3408595e-08    3.5502423    3.5502459    3.5502459    44.748127 
     118            0   -35.878494    1181808.3    1181804.2    1181810.3    1181810.3 -1.5143698e-08 1.4682185e-08 1.3560312e-08    3.5502423    3.5502459    3.5502459    44.748127 
     119            0   -35.878494    1181819.1    1181814.5    1181821.4    1181821.4 -1.3408039e-08 1.2163506e-08 1.1344929e-08    3.5502423    3.5502459    3.5502459    44.748127 
     120            0   -35.878494    1181821.1    1181815.7    1181823.9    1181823.9 -1.31938e-08 1.0896978e-08 9.7925128e-09    3.5502423    3.5502459    3.5502459    44.748127 
     121            0   -35.878494    1181802.8    1181794.2    1181807.2    1181807.2 -3.9669249e-09 1.6642263e-09 1.9188688e-09    3.5502423    3.5502459    3.5502459    44.748127 
     122            0   -35.878494    1181824.5    1181814.9    1181829.4    1181829.4 -3.8368129e-09 1.8622378e-09 2.294414e-09    3.5502423    3.5502459    3.5502459    44.748127 
     123            0   -35.878494    1181824.5    1181814.9    1181829.4    1181829.4 -3.8368129e-09 1.8622378e-09 2.294414e-09    3.5502423    3.5502459    3.5502459    44.748127 
Loop time of 0.00559902 on 1 procs for 23 steps with 4 atoms

100.0% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = linesearch alpha is zero
  Energy initial, next-to-last, final = 
        -18.3899316424     -35.8784940631     -35.8784940631
  Force two-norm initial, final = 3.44805 0.000480173
  Force max component initial, final = 0.995368 0.000164959
  Final line search alpha, max atom move = 0.03125 5.15497e-06
  Iterations, force evaluations = 23 71

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.0047417  | 0.0047417  | 0.0047417  |   0.0 | 84.69
Neigh   | 5.0068e-05 | 5.0068e-05 | 5.0068e-05 |   0.0 |  0.89
Comm    | 0.00047278 | 0.00047278 | 0.00047278 |   0.0 |  8.44
Output  | 0.00021219 | 0.00021219 | 0.00021219 |   0.0 |  3.79
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0001223  |            |       |  2.18

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1368 ave 1368 max 1368 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1000 ave 1000 max 1000 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1000
Ave neighs/atom = 250
Neighbor list builds = 1
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1181814.85223556
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1181829.37137315
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1181829.37136673
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -3.83681290572664e-09
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 1.86223778482654e-09
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 2.29441399819696e-09

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 117960371.142226
variable C2neg equal ${d2}
variable C2neg equal 117961823.056005
variable C3neg equal ${d3}
variable C3neg equal 117961823.055356
variable C4neg equal ${d4}
variable C4neg equal 3.16897288833982e-07
variable C5neg equal ${d5}
variable C5neg equal 2.71525135284527e-07
variable C6neg equal ${d6}
variable C6neg equal -4.76689977288489e-07

# Reset box and simulation parameters

clear
read_restart restart.equil remap
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1e-06*${len0}
variable delta equal 1e-06*3.55024587357023
if "${dir} == 1" then    "change_box all x delta 0 ${delta} remap units box"
change_box all x delta 0 ${delta} remap units box
change_box all x delta 0 3.55024587357023e-06 remap units box
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53348 3.53347 3.53347) with tilt (0 -0 0)
if "${dir} == 2" then    "change_box all y delta 0 ${delta} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     100            0   -18.389932    2209.2831    2209.3968    2209.2263    2209.2263 1.9486505e-09 -8.6303039e-10 -6.4912281e-10    3.5502494    3.5502459    3.5502459    44.748216 
     101            0   -20.437168    73526.309    73526.383    73526.272    73526.272 2.8273789e-09 -2.7121642e-09 -1.965045e-09    3.5502494    3.5502459    3.5502459    44.748216 
     102            0   -24.323642    227842.99    227842.85    227843.06    227843.06 2.611507e-09 -3.2169848e-09 -2.0048101e-09    3.5502494    3.5502459    3.5502459    44.748216 
     103            0   -29.703625    497425.73    497425.17    497426.01    497426.01 9.2986413e-10 -2.2341929e-10 5.6296201e-10    3.5502494    3.5502459    3.5502459    44.748216 
     104            0   -34.705093    897463.62    897462.65     897464.1     897464.1 -7.1754178e-11 -1.3034213e-09 -4.3769116e-10    3.5502494    3.5502459    3.5502459    44.748216 
     105            0   -35.829462    1125915.4    1125914.6    1125915.9    1125915.9 -2.8448645e-09 3.2135073e-09 2.9260632e-09    3.5502494    3.5502459    3.5502459    44.748216 
     106            0   -35.873629    1164461.3    1164460.6    1164461.6    1164461.6 -1.6922905e-09 3.756766e-10 -8.7573667e-10    3.5502494    3.5502459    3.5502459    44.748216 
     107            0   -35.877995    1176218.4      1176218    1176218.7    1176218.7 -6.9463395e-09 7.1905592e-09 6.1078905e-09    3.5502494    3.5502459    3.5502459    44.748216 
     108            0   -35.878504    1180227.7    1180227.5    1180227.8    1180227.8 1.4279266e-08 -1.4151899e-08 -1.0633426e-08    3.5502494    3.5502459    3.5502459    44.748216 
     109            0   -35.878552    1181590.4    1181590.6    1181590.3    1181590.3 9.2373625e-09 -8.87812e-09 -7.0561443e-09    3.5502494    3.5502459    3.5502459    44.748216 
     110            0   -35.878554    1181519.3    1181519.9      1181519      1181519 2.2801231e-08 -2.1765362e-08 -1.806256e-08    3.5502494    3.5502459    3.5502459    44.748216 
     111            0   -35.878557      1181340    1181341.2    1181339.5    1181339.5 1.4745061e-08 -1.4072016e-08 -1.0606842e-08    3.5502494    3.5502459    3.5502459    44.748216 
     112            0   -35.878559    1182143.4      1182145    1182142.5    1182142.5 -2.0884494e-08 1.9670407e-08 1.6056655e-08    3.5502494    3.5502459    3.5502459    44.748216 
     113            0    -35.87856    1181954.2    1181956.1    1181953.3    1181953.3 -2.2861391e-08 2.2084539e-08 1.5715032e-08    3.5502494    3.5502459    3.5502459    44.748216 
     114            0    -35.87856    1181736.3    1181738.6    1181735.2    1181735.2 -2.7267757e-08 2.6444931e-08 2.1089098e-08    3.5502494    3.5502459    3.5502459    44.748216 
     115            0    -35.87856    1181759.3    1181761.7    1181758.2    1181758.2 -2.9445158e-08 2.6346699e-08 2.1899651e-08    3.5502494    3.5502459    3.5502459    44.748216 
     116            0    -35.87856    1181779.8    1181782.3    1181778.6    1181778.6 -2.7966415e-08 2.5527224e-08  2.11486e-08    3.5502494    3.5502459    3.5502459    44.748216 
     117            0    -35.87856    1181856.1    1181859.3    1181854.5    1181854.5 -1.7484524e-08 1.7467455e-08 1.2469181e-08    3.5502494    3.5502459    3.5502459    44.748216 
     118            0    -35.87856      1181825    1181828.3    1181823.3    1181823.3 -2.4240321e-08 2.2130225e-08 1.8232426e-08    3.5502494    3.5502459    3.5502459    44.748216 
     119            0    -35.87856      1181818    1181821.5    1181816.3    1181816.3 -2.396326e-08 2.1498066e-08 1.589948e-08    3.5502494    3.5502459    3.5502459    44.748216 
     120            0    -35.87856      1181818    1181821.5    1181816.3    1181816.3 -2.396326e-08 2.1498066e-08 1.589948e-08    3.5502494    3.5502459    3.5502459    44.748216 
Loop time of 0.00613809 on 1 procs for 20 steps with 4 atoms

100.0% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = linesearch alpha is zero
  Energy initial, next-to-last, final = 
        -18.3899317659     -35.8785600771     -35.8785600771
  Force two-norm initial, final = 3.44806 0.000438246
  Force max component initial, final = 0.995369 0.000160263
  Final line search alpha, max atom move = 0.0625 1.00165e-05
  Iterations, force evaluations = 20 79

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.0052626  | 0.0052626  | 0.0052626  |   0.0 | 85.74
Neigh   | 4.8876e-05 | 4.8876e-05 | 4.8876e-05 |   0.0 |  0.80
Comm    | 0.00050187 | 0.00050187 | 0.00050187 |   0.0 |  8.18
Output  | 0.0001688  | 0.0001688  | 0.0001688  |   0.0 |  2.75
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0001559  |            |       |  2.54

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1368 ave 1368 max 1368 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1000 ave 1000 max 1000 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1000
Ave neighs/atom = 250
Neighbor list builds = 1
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -35.8785600770884
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal 1181818.03054178
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1181821.5021998
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1181816.29471454
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1181816.29471099
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -2.39632603058301e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 2.14980655588519e-08
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 1.58994796686668e-08

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal -117961036.13865
variable C2pos equal ${d2}
variable C2pos equal -117960515.390144
variable C3pos equal ${d3}
variable C3pos equal -117960515.389782
variable C4pos equal ${d4}
variable C4pos equal -1.67740385588097e-06
variable C5pos equal ${d5}
variable C5pos equal -2.23510791268706e-06
variable C6pos equal ${d6}
variable C6pos equal 2.48933471729883e-06

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C11 equal 0.5*(${C1neg}+${C1pos})
variable C11 equal 0.5*(117960371.142226+${C1pos})
variable C11 equal 0.5*(117960371.142226+-117961036.13865)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C21 equal 0.5*(${C2neg}+${C2pos})
variable C21 equal 0.5*(117961823.056005+${C2pos})
variable C21 equal 0.5*(117961823.056005+-117960515.390144)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C31 equal 0.5*(${C3neg}+${C3pos})
variable C31 equal 0.5*(117961823.055356+${C3pos})
variable C31 equal 0.5*(117961823.055356+-117960515.389782)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C41 equal 0.5*(${C4neg}+${C4pos})
variable C41 equal 0.5*(3.16897288833982e-07+${C4pos})
variable C41 equal 0.5*(3.16897288833982e-07+-1.67740385588097e-06)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C51 equal 0.5*(${C5neg}+${C5pos})
variable C51 equal 0.5*(2.71525135284527e-07+${C5pos})
variable C51 equal 0.5*(2.71525135284527e-07+-2.23510791268706e-06)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C61 equal 0.5*(${C6neg}+${C6pos})
variable C61 equal 0.5*(-4.76689977288489e-07+${C6pos})
variable C61 equal 0.5*(-4.76689977288489e-07+2.48933471729883e-06)

# Delete dir to make sure it is not reused

variable dir delete
# ---- uyy Perturbation
variable dir equal 2
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
variable len0 equal ${ly0}
variable len0 equal 3.55024587356922
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
read_restart restart.equil remap
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1e-06*${len0}
variable delta equal -1e-06*3.55024587356922
if "${dir} == 1" then    "change_box all x delta 0 ${delta} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} remap units box"
change_box all y delta 0 ${delta} remap units box
change_box all y delta 0 -3.55024587356922e-06 remap units box
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     100            0   -18.389932    2212.9985    2213.0554    2212.8848    2213.0554 1.261941e-09 -1.3065942e-09 -7.4422564e-10    3.5502459    3.5502423    3.5502459    44.748127 
     101            0   -20.437167    73530.744    73530.781     73530.67    73530.781 2.8489854e-09 -2.4370025e-09 -1.6659597e-09    3.5502459    3.5502423    3.5502459    44.748127 
     102            0   -24.323638    227847.68    227847.61    227847.82    227847.61 3.2542956e-09 -3.4769209e-09 -2.728274e-09    3.5502459    3.5502423    3.5502459    44.748127 
     103            0   -29.703612    497432.57    497432.29    497433.13    497432.29 7.9158532e-10 2.8155585e-10 -9.8925533e-10    3.5502459    3.5502423    3.5502459    44.748127 
     104            0   -34.705054    897471.02    897470.54    897471.99    897470.54 -3.6998384e-10 -9.1589025e-10 -2.7397519e-09    3.5502459    3.5502423    3.5502459    44.748127 
     105            0   -35.829404    1125927.9    1125927.5    1125928.8    1125927.5 -3.9343661e-09 3.6813064e-09 2.6736607e-09    3.5502459    3.5502423    3.5502459    44.748127 
     106            0   -35.873563    1164467.3      1164467      1164468      1164467 -1.068586e-09 -4.3469917e-11 -7.9523985e-10    3.5502459    3.5502423    3.5502459    44.748127 
     107            0   -35.877929    1176223.8    1176223.5    1176224.2    1176223.5 -6.4382808e-09 7.3090205e-09 6.1282907e-09    3.5502459    3.5502423    3.5502459    44.748127 
     108            0   -35.878438    1180233.6    1180233.5    1180233.8    1180233.5 1.4495085e-08 -1.255681e-08 -1.0549212e-08    3.5502459    3.5502423    3.5502459    44.748127 
     109            0   -35.878486    1181596.7    1181596.7    1181596.5    1181596.7 9.9227676e-09 -8.7275159e-09 -7.8902353e-09    3.5502459    3.5502423    3.5502459    44.748127 
     110            0   -35.878488    1181525.5    1181525.8    1181524.9    1181525.8 2.4543247e-08 -1.916284e-08 -1.5218554e-08    3.5502459    3.5502423    3.5502459    44.748127 
     111            0   -35.878491    1181346.3    1181346.8    1181345.1    1181346.8 1.3959803e-08 -1.1539573e-08 -1.0097258e-08    3.5502459    3.5502423    3.5502459    44.748127 
     112            0   -35.878493    1182149.2    1182150.1    1182147.6    1182150.1 -2.1168015e-08 1.8174136e-08 1.6083619e-08    3.5502459    3.5502423    3.5502459    44.748127 
     113            0   -35.878494    1182070.8    1182071.7      1182069    1182071.7 -1.9238202e-08 1.8783606e-08 1.5781463e-08    3.5502459    3.5502423    3.5502459    44.748127 
     114            0   -35.878494    1181845.2    1181846.2    1181843.1    1181846.2 -3.4843457e-08 2.9126148e-08 2.2643526e-08    3.5502459    3.5502423    3.5502459    44.748127 
     115            0   -35.878494    1181821.1    1181822.2    1181818.9    1181822.2 -2.9321315e-08 2.5491559e-08 2.1625234e-08    3.5502459    3.5502423    3.5502459    44.748127 
     116            0   -35.878494    1181805.4    1181806.9    1181802.5    1181806.9 -2.5110162e-08 2.1881233e-08 1.6429306e-08    3.5502459    3.5502423    3.5502459    44.748127 
     117            0   -35.878494    1181820.3      1181822      1181817      1181822 -2.1494542e-08 1.8349355e-08 1.6812464e-08    3.5502459    3.5502423    3.5502459    44.748127 
     118            0   -35.878494    1181808.3    1181810.3    1181804.2    1181810.3 -1.7138934e-08 1.5326019e-08 1.0993197e-08    3.5502459    3.5502423    3.5502459    44.748127 
     119            0   -35.878494    1181819.1    1181821.4    1181814.5    1181821.4 -1.7175863e-08 1.5354203e-08 1.1350355e-08    3.5502459    3.5502423    3.5502459    44.748127 
     120            0   -35.878494    1181821.1    1181823.9    1181815.7    1181823.9 -1.3061083e-08 1.204473e-08 8.6687625e-09    3.5502459    3.5502423    3.5502459    44.748127 
     121            0   -35.878494    1181802.8    1181807.2    1181794.2    1181807.2 -1.1765821e-09 8.9321979e-11 3.0046339e-09    3.5502459    3.5502423    3.5502459    44.748127 
     122            0   -35.878494    1181824.5    1181829.4    1181814.8    1181829.4 -2.9620401e-09 -4.7712767e-10 1.1605763e-09    3.5502459    3.5502423    3.5502459    44.748127 
     123            0   -35.878494    1181824.5    1181829.4    1181814.8    1181829.4 -2.9620401e-09 -4.7712767e-10 1.1605763e-09    3.5502459    3.5502423    3.5502459    44.748127 
Loop time of 0.00603294 on 1 procs for 23 steps with 4 atoms

92.9% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = linesearch alpha is zero
  Energy initial, next-to-last, final = 
        -18.3899316424     -35.8784940631     -35.8784940631
  Force two-norm initial, final = 3.44805 0.000480008
  Force max component initial, final = 0.995368 0.000164906
  Final line search alpha, max atom move = 0.03125 5.15332e-06
  Iterations, force evaluations = 23 71

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.0051577  | 0.0051577  | 0.0051577  |   0.0 | 85.49
Neigh   | 5.1022e-05 | 5.1022e-05 | 5.1022e-05 |   0.0 |  0.85
Comm    | 0.00048375 | 0.00048375 | 0.00048375 |   0.0 |  8.02
Output  | 0.0002079  | 0.0002079  | 0.0002079  |   0.0 |  3.45
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0001326  |            |       |  2.20

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1368 ave 1368 max 1368 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1000 ave 1000 max 1000 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1000
Ave neighs/atom = 250
Neighbor list builds = 1
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1181829.36722126
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1181814.84991276
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1181829.36723864
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -2.96204007509635e-09
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal -4.77127671328291e-10
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 1.16057627631203e-09

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 117961822.640796
variable C2neg equal ${d2}
variable C2neg equal 117960370.909966
variable C3neg equal ${d3}
variable C3neg equal 117961822.642547
variable C4neg equal ${d4}
variable C4neg equal 2.03513516645489e-07
variable C5neg equal ${d5}
variable C5neg equal 3.75885896690443e-08
variable C6neg equal ${d6}
variable C6neg equal -3.8921269422546e-07

# Reset box and simulation parameters

clear
read_restart restart.equil remap
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1e-06*${len0}
variable delta equal 1e-06*3.55024587356922
if "${dir} == 1" then    "change_box all x delta 0 ${delta} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} remap units box"
change_box all y delta 0 ${delta} remap units box
change_box all y delta 0 3.55024587356922e-06 remap units box
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53348 3.53347) with tilt (0 -0 0)
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     100            0   -18.389932    2209.2831    2209.2263    2209.3968    2209.2263 1.3651294e-09 -1.0822948e-09 -2.2538797e-10    3.5502459    3.5502494    3.5502459    44.748216 
     101            0   -20.437168    73526.309    73526.272    73526.383    73526.272 3.0842535e-09 -2.1633546e-09 -1.4685095e-09    3.5502459    3.5502494    3.5502459    44.748216 
     102            0   -24.323642    227842.99    227843.06    227842.85    227843.06 4.2300178e-09 -2.8844725e-09 -2.7454152e-09    3.5502459    3.5502494    3.5502459    44.748216 
     103            0   -29.703625    497425.73    497426.01    497425.17    497426.01 7.6625819e-10 -4.0126962e-10 3.7317293e-10    3.5502459    3.5502494    3.5502459    44.748216 
     104            0   -34.705093    897463.62     897464.1    897462.65     897464.1 8.6507476e-10 -4.3657032e-10 3.1671741e-10    3.5502459    3.5502494    3.5502459    44.748216 
     105            0   -35.829462    1125915.4    1125915.9    1125914.6    1125915.9 -3.7143689e-09 4.8107988e-09 1.2576411e-09    3.5502459    3.5502494    3.5502459    44.748216 
     106            0   -35.873629    1164461.3    1164461.6    1164460.6    1164461.6 -6.9334353e-10 1.7952631e-09 -3.2417902e-10    3.5502459    3.5502494    3.5502459    44.748216 
     107            0   -35.877995    1176218.4    1176218.7      1176218    1176218.7 -8.6703401e-09 6.2004479e-09 3.2844227e-09    3.5502459    3.5502494    3.5502459    44.748216 
     108            0   -35.878504    1180227.7    1180227.8    1180227.5    1180227.8 1.2866757e-08 -1.0067749e-08 -9.8694391e-09    3.5502459    3.5502494    3.5502459    44.748216 
     109            0   -35.878552    1181590.4    1181590.3    1181590.6    1181590.3 8.5537973e-09 -7.1663747e-09 -6.1468861e-09    3.5502459    3.5502494    3.5502459    44.748216 
     110            0   -35.878554    1181519.3      1181519    1181519.9      1181519 2.2988073e-08 -1.7754945e-08 -1.3901507e-08    3.5502459    3.5502494    3.5502459    44.748216 
     111            0   -35.878557      1181340    1181339.5    1181341.2    1181339.5 1.3403684e-08 -8.9471137e-09 -8.704333e-09    3.5502459    3.5502494    3.5502459    44.748216 
     112            0   -35.878559    1182143.4    1182142.5      1182145    1182142.5 -1.9984166e-08 1.501944e-08 1.2494416e-08    3.5502459    3.5502494    3.5502459    44.748216 
     113            0    -35.87856    1181954.2    1181953.3    1181956.1    1181953.3 -2.1181251e-08 1.5907536e-08 1.2177415e-08    3.5502459    3.5502494    3.5502459    44.748216 
     114            0    -35.87856    1181736.3    1181735.2    1181738.6    1181735.2 -2.5914946e-08 2.0273833e-08 1.5706998e-08    3.5502459    3.5502494    3.5502459    44.748216 
     115            0    -35.87856    1181759.3    1181758.2    1181761.7    1181758.2 -2.6452318e-08 2.0023938e-08 1.5704871e-08    3.5502459    3.5502494    3.5502459    44.748216 
     116            0    -35.87856    1181779.8    1181778.6    1181782.3    1181778.6 -2.5414135e-08 1.9980935e-08 1.7505456e-08    3.5502459    3.5502494    3.5502459    44.748216 
     117            0    -35.87856    1181856.1    1181854.5    1181859.2    1181854.5 -1.645739e-08 1.1744289e-08  1.07311e-08    3.5502459    3.5502494    3.5502459    44.748216 
     118            0    -35.87856    1181824.9    1181823.3    1181828.3    1181823.3 -2.3152683e-08 1.6331449e-08 1.5296338e-08    3.5502459    3.5502494    3.5502459    44.748216 
     119            0    -35.87856      1181818    1181816.3    1181821.5    1181816.3 -2.1189943e-08 1.5847502e-08 1.3753718e-08    3.5502459    3.5502494    3.5502459    44.748216 
     120            0    -35.87856      1181818    1181816.3    1181821.5    1181816.3 -2.1189943e-08 1.5847502e-08 1.3753718e-08    3.5502459    3.5502494    3.5502459    44.748216 
Loop time of 0.00654888 on 1 procs for 20 steps with 4 atoms

94.4% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = linesearch alpha is zero
  Energy initial, next-to-last, final = 
        -18.3899317659     -35.8785600771     -35.8785600771
  Force two-norm initial, final = 3.44806 0.000437398
  Force max component initial, final = 0.995369 0.000160014
  Final line search alpha, max atom move = 0.0625 1.00009e-05
  Iterations, force evaluations = 20 79

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.0056703  | 0.0056703  | 0.0056703  |   0.0 | 86.58
Neigh   | 5.0068e-05 | 5.0068e-05 | 5.0068e-05 |   0.0 |  0.76
Comm    | 0.000525   | 0.000525   | 0.000525   |   0.0 |  8.02
Output  | 0.00016093 | 0.00016093 | 0.00016093 |   0.0 |  2.46
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0001426  |            |       |  2.18

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1368 ave 1368 max 1368 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1000 ave 1000 max 1000 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1000
Ave neighs/atom = 250
Neighbor list builds = 1
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -35.8785600770913
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal 1181818.01265013
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1181816.276744
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1181821.48445331
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1181816.27675306
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -2.11899431531258e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 1.5847502249699e-08
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 1.37537183792565e-08

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal -117960513.59307
variable C2pos equal ${d2}
variable C2pos equal -117961034.364021
variable C3pos equal ${d3}
variable C3pos equal -117960513.593989
variable C4pos equal ${d4}
variable C4pos equal -1.46282772693994e-06
variable C5pos equal ${d5}
variable C5pos equal -1.67005158177177e-06
variable C6pos equal ${d6}
variable C6pos equal 2.21200300202841e-06

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C12 equal 0.5*(${C1neg}+${C1pos})
variable C12 equal 0.5*(117961822.640796+${C1pos})
variable C12 equal 0.5*(117961822.640796+-117960513.59307)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C22 equal 0.5*(${C2neg}+${C2pos})
variable C22 equal 0.5*(117960370.909966+${C2pos})
variable C22 equal 0.5*(117960370.909966+-117961034.364021)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C32 equal 0.5*(${C3neg}+${C3pos})
variable C32 equal 0.5*(117961822.642547+${C3pos})
variable C32 equal 0.5*(117961822.642547+-117960513.593989)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C42 equal 0.5*(${C4neg}+${C4pos})
variable C42 equal 0.5*(2.03513516645489e-07+${C4pos})
variable C42 equal 0.5*(2.03513516645489e-07+-1.46282772693994e-06)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C52 equal 0.5*(${C5neg}+${C5pos})
variable C52 equal 0.5*(3.75885896690443e-08+${C5pos})
variable C52 equal 0.5*(3.75885896690443e-08+-1.67005158177177e-06)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C62 equal 0.5*(${C6neg}+${C6pos})
variable C62 equal 0.5*(-3.8921269422546e-07+${C6pos})
variable C62 equal 0.5*(-3.8921269422546e-07+2.21200300202841e-06)

# Delete dir to make sure it is not reused

variable dir delete
# ---- uzz Perturbation
variable dir equal 3
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
variable len0 equal ${lz0}
variable len0 equal 3.55024587356973
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
read_restart restart.equil remap
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1e-06*${len0}
variable delta equal -1e-06*3.55024587356973
if "${dir} == 1" then    "change_box all x delta 0 ${delta} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
change_box all z delta 0 ${delta} remap units box
change_box all z delta 0 -3.55024587356973e-06 remap units box
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     100            0   -18.389932    2212.9985    2213.0554    2213.0554    2212.8848 1.483894e-09 -6.3792593e-10 -3.490071e-10    3.5502459    3.5502459    3.5502423    44.748127 
     101            0   -20.437167    73530.744    73530.781    73530.781     73530.67 2.7338192e-09 -2.7207922e-09 -1.2732936e-09    3.5502459    3.5502459    3.5502423    44.748127 
     102            0   -24.323638    227847.68    227847.61    227847.61    227847.82 2.5994533e-09 -2.993978e-09 -2.3432649e-09    3.5502459    3.5502459    3.5502423    44.748127 
     103            0   -29.703612    497432.57    497432.29    497432.29    497433.13 8.5037125e-10 -8.7836687e-10 -1.7805442e-10    3.5502459    3.5502459    3.5502423    44.748127 
     104            0   -34.705054    897471.02    897470.54    897470.54    897471.99 6.4716892e-10 -1.0714732e-09 -1.1505198e-09    3.5502459    3.5502459    3.5502423    44.748127 
     105            0   -35.829404    1125927.9    1125927.5    1125927.5    1125928.8 -3.1072053e-09 2.1311469e-09 2.1149801e-09    3.5502459    3.5502459    3.5502423    44.748127 
     106            0   -35.873563    1164467.3      1164467      1164467      1164468 -7.5336114e-10 1.0335488e-09 4.9757186e-10    3.5502459    3.5502459    3.5502423    44.748127 
     107            0   -35.877929    1176223.8    1176223.5    1176223.5    1176224.2 -7.3942451e-09 5.6492628e-09 5.0006064e-09    3.5502459    3.5502459    3.5502423    44.748127 
     108            0   -35.878438    1180233.6    1180233.5    1180233.5    1180233.8 1.3666723e-08 -1.1656726e-08 -9.2220168e-09    3.5502459    3.5502459    3.5502423    44.748127 
     109            0   -35.878486    1181596.7    1181596.7    1181596.7    1181596.5 9.8194706e-09 -8.7254818e-09 -4.5086707e-09    3.5502459    3.5502459    3.5502423    44.748127 
     110            0   -35.878488    1181525.5    1181525.8    1181525.8    1181524.9 2.3007142e-08 -1.9094286e-08 -1.2214827e-08    3.5502459    3.5502459    3.5502423    44.748127 
     111            0   -35.878491    1181346.3    1181346.8    1181346.8    1181345.1 1.2681234e-08 -1.3084552e-08 -8.3790867e-09    3.5502459    3.5502459    3.5502423    44.748127 
     112            0   -35.878493    1182149.2    1182150.1    1182150.1    1182147.6 -1.8822403e-08 1.8126308e-08 1.1515904e-08    3.5502459    3.5502459    3.5502423    44.748127 
     113            0   -35.878494    1182070.8    1182071.7    1182071.7      1182069 -2.0463871e-08 1.7409334e-08 1.2320717e-08    3.5502459    3.5502459    3.5502423    44.748127 
     114            0   -35.878494    1181845.2    1181846.2    1181846.2    1181843.1 -3.414898e-08 2.7393436e-08 2.0430672e-08    3.5502459    3.5502459    3.5502423    44.748127 
     115            0   -35.878494    1181821.1    1181822.2    1181822.2    1181818.9 -2.9033334e-08 2.5631581e-08 1.8320378e-08    3.5502459    3.5502459    3.5502423    44.748127 
     116            0   -35.878494    1181805.4    1181806.9    1181806.9    1181802.5 -2.2489612e-08 1.9081664e-08 1.3093474e-08    3.5502459    3.5502459    3.5502423    44.748127 
     117            0   -35.878494    1181820.3      1181822      1181822      1181817 -2.028117e-08 1.9482328e-08 1.3641572e-08    3.5502459    3.5502459    3.5502423    44.748127 
     118            0   -35.878494    1181808.3    1181810.3    1181810.3    1181804.2 -1.7386573e-08 1.4149974e-08 1.0863819e-08    3.5502459    3.5502459    3.5502423    44.748127 
     119            0   -35.878494    1181819.1    1181821.4    1181821.4    1181814.5 -1.7095416e-08 1.4186163e-08 8.9969646e-09    3.5502459    3.5502459    3.5502423    44.748127 
     120            0   -35.878494    1181821.1    1181823.9    1181823.9    1181815.7 -1.3340188e-08 1.152303e-08 7.3284758e-09    3.5502459    3.5502459    3.5502423    44.748127 
     121            0   -35.878494    1181802.8    1181807.2    1181807.2    1181794.2 -1.9412794e-09 2.9907341e-09 1.6385584e-09    3.5502459    3.5502459    3.5502423    44.748127 
     122            0   -35.878494    1181824.5    1181829.4    1181829.4    1181814.9 -6.6292459e-10 1.8969085e-09 3.0777764e-09    3.5502459    3.5502459    3.5502423    44.748127 
     123            0   -35.878494    1181824.5    1181829.4    1181829.4    1181814.9 -6.6292459e-10 1.8969085e-09 3.0777764e-09    3.5502459    3.5502459    3.5502423    44.748127 
Loop time of 0.00770998 on 1 procs for 23 steps with 4 atoms

61.5% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = linesearch alpha is zero
  Energy initial, next-to-last, final = 
        -18.3899316424     -35.8784940631     -35.8784940631
  Force two-norm initial, final = 3.44805 0.000480025
  Force max component initial, final = 0.995368 0.000164912
  Final line search alpha, max atom move = 0.03125 5.15349e-06
  Iterations, force evaluations = 23 71

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.0068049  | 0.0068049  | 0.0068049  |   0.0 | 88.26
Neigh   | 5.3167e-05 | 5.3167e-05 | 5.3167e-05 |   0.0 |  0.69
Comm    | 0.00049329 | 0.00049329 | 0.00049329 |   0.0 |  6.40
Output  | 0.00021982 | 0.00021982 | 0.00021982 |   0.0 |  2.85
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0001388  |            |       |  1.80

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1368 ave 1368 max 1368 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1000 ave 1000 max 1000 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1000
Ave neighs/atom = 250
Neighbor list builds = 1
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1181829.36765522
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1181829.36767903
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1181814.85015764
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -6.62924587253774e-10
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 1.89690846691836e-09
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 3.07777636555229e-09

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 117961822.684192
variable C2neg equal ${d2}
variable C2neg equal 117961822.686593
variable C3neg equal ${d3}
variable C3neg equal 117960370.934447
variable C4neg equal ${d4}
variable C4neg equal 3.95233525569515e-07
variable C5neg equal ${d5}
variable C5neg equal 2.74992203493709e-07
variable C6neg equal ${d6}
variable C6neg equal -1.59301145441202e-07

# Reset box and simulation parameters

clear
read_restart restart.equil remap
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1e-06*${len0}
variable delta equal 1e-06*3.55024587356973
if "${dir} == 1" then    "change_box all x delta 0 ${delta} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
change_box all z delta 0 ${delta} remap units box
change_box all z delta 0 3.55024587356973e-06 remap units box
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53348) with tilt (0 -0 0)
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     100            0   -18.389932    2209.2831    2209.2263    2209.2263    2209.3968 1.5656625e-09 -1.0823686e-09 -5.594616e-10    3.5502459    3.5502459    3.5502494    44.748216 
     101            0   -20.437168    73526.309    73526.272    73526.272    73526.383 2.0085596e-09 -2.4283106e-09 -1.5451814e-09    3.5502459    3.5502459    3.5502494    44.748216 
     102            0   -24.323642    227842.99    227843.06    227843.06    227842.85 3.1263019e-09 -3.2428538e-09 -1.8753002e-09    3.5502459    3.5502459    3.5502494    44.748216 
     103            0   -29.703625    497425.73    497426.01    497426.01    497425.17 2.4208576e-09 -6.9280758e-10 -8.7283448e-10    3.5502459    3.5502459    3.5502494    44.748216 
     104            0   -34.705093    897463.62     897464.1     897464.1    897462.65 -5.659456e-10 1.6656645e-09 -2.5735781e-10    3.5502459    3.5502459    3.5502494    44.748216 
     105            0   -35.829462    1125915.4    1125915.9    1125915.9    1125914.6 -3.6738721e-09 3.5897862e-09 2.8193822e-09    3.5502459    3.5502459    3.5502494    44.748216 
     106            0   -35.873629    1164461.3    1164461.6    1164461.6    1164460.6 -1.0459272e-09 -1.0646306e-09 3.3554191e-10    3.5502459    3.5502459    3.5502494    44.748216 
     107            0   -35.877995    1176218.4    1176218.7    1176218.7      1176218 -7.352705e-09 5.9985677e-09 5.646296e-09    3.5502459    3.5502459    3.5502494    44.748216 
     108            0   -35.878504    1180227.7    1180227.8    1180227.8    1180227.5 1.3015657e-08 -1.1520807e-08 -8.5796397e-09    3.5502459    3.5502459    3.5502494    44.748216 
     109            0   -35.878552    1181590.4    1181590.3    1181590.3    1181590.6 9.131931e-09 -7.2403756e-09 -5.176875e-09    3.5502459    3.5502459    3.5502494    44.748216 
     110            0   -35.878554    1181519.3      1181519      1181519    1181519.9 2.1819357e-08 -2.0446754e-08 -1.4087673e-08    3.5502459    3.5502459    3.5502494    44.748216 
     111            0   -35.878557      1181340    1181339.5    1181339.5    1181341.2 1.2198785e-08 -1.1471936e-08 -8.8856174e-09    3.5502459    3.5502459    3.5502494    44.748216 
     112            0   -35.878559    1182143.4    1182142.5    1182142.5      1182145 -1.9473134e-08 1.7421399e-08 1.2724257e-08    3.5502459    3.5502459    3.5502494    44.748216 
     113            0    -35.87856    1181954.2    1181953.3    1181953.3    1181956.1 -2.142642e-08 1.8796546e-08 1.3239208e-08    3.5502459    3.5502459    3.5502494    44.748216 
     114            0    -35.87856    1181736.3    1181735.2    1181735.2    1181738.6 -2.6029649e-08 2.3542111e-08 1.7739696e-08    3.5502459    3.5502459    3.5502494    44.748216 
     115            0    -35.87856    1181759.3    1181758.2    1181758.2    1181761.7 -2.6832596e-08 2.317871e-08 1.5558876e-08    3.5502459    3.5502459    3.5502494    44.748216 
     116            0    -35.87856    1181779.8    1181778.6    1181778.6    1181782.3 -2.7121754e-08 2.4035449e-08 1.7205757e-08    3.5502459    3.5502459    3.5502494    44.748216 
     117            0    -35.87856    1181856.1    1181854.5    1181854.5    1181859.2 -1.4740955e-08 1.3063496e-08 9.5251701e-09    3.5502459    3.5502459    3.5502494    44.748216 
     118            0    -35.87856    1181824.9    1181823.3    1181823.3    1181828.3 -2.1199871e-08 2.0551667e-08 1.5085921e-08    3.5502459    3.5502459    3.5502494    44.748216 
     119            0    -35.87856      1181818    1181816.3    1181816.3    1181821.5 -2.0155451e-08 1.8771687e-08 1.2646089e-08    3.5502459    3.5502459    3.5502494    44.748216 
     120            0    -35.87856      1181818    1181816.3    1181816.3    1181821.5 -2.0155451e-08 1.8771687e-08 1.2646089e-08    3.5502459    3.5502459    3.5502494    44.748216 
Loop time of 0.00682497 on 1 procs for 20 steps with 4 atoms

91.6% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = linesearch alpha is zero
  Energy initial, next-to-last, final = 
        -18.3899317659     -35.8785600771     -35.8785600771
  Force two-norm initial, final = 3.44806 0.000437643
  Force max component initial, final = 0.995369 0.000160086
  Final line search alpha, max atom move = 0.0625 1.00054e-05
  Iterations, force evaluations = 20 79

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.0053487  | 0.0053487  | 0.0053487  |   0.0 | 78.37
Neigh   | 5.1022e-05 | 5.1022e-05 | 5.1022e-05 |   0.0 |  0.75
Comm    | 0.00053358 | 0.00053358 | 0.00053358 |   0.0 |  7.82
Output  | 0.00076032 | 0.00076032 | 0.00076032 |   0.0 | 11.14
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0001314  |            |       |  1.92

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1368 ave 1368 max 1368 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1000 ave 1000 max 1000 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1000
Ave neighs/atom = 250
Neighbor list builds = 1
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -35.8785600770902
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal 1181818.01781807
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1181816.28193109
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1181816.2819437
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1181821.48957942
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -2.01554514483191e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 1.87716871176445e-08
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 1.26460893775551e-08

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal -117960514.111779
variable C2pos equal ${d2}
variable C2pos equal -117960514.11306
variable C3pos equal ${d3}
variable C3pos equal -117961034.876625
variable C4pos equal ${d4}
variable C4pos equal -1.3520648267698e-06
variable C5pos equal ${d5}
variable C5pos equal -1.96247006856632e-06
variable C6pos equal ${d6}
variable C6pos equal 2.10855383154774e-06

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C13 equal 0.5*(${C1neg}+${C1pos})
variable C13 equal 0.5*(117961822.684192+${C1pos})
variable C13 equal 0.5*(117961822.684192+-117960514.111779)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C23 equal 0.5*(${C2neg}+${C2pos})
variable C23 equal 0.5*(117961822.686593+${C2pos})
variable C23 equal 0.5*(117961822.686593+-117960514.11306)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C33 equal 0.5*(${C3neg}+${C3pos})
variable C33 equal 0.5*(117960370.934447+${C3pos})
variable C33 equal 0.5*(117960370.934447+-117961034.876625)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C43 equal 0.5*(${C4neg}+${C4pos})
variable C43 equal 0.5*(3.95233525569515e-07+${C4pos})
variable C43 equal 0.5*(3.95233525569515e-07+-1.3520648267698e-06)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C53 equal 0.5*(${C5neg}+${C5pos})
variable C53 equal 0.5*(2.74992203493709e-07+${C5pos})
variable C53 equal 0.5*(2.74992203493709e-07+-1.96247006856632e-06)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C63 equal 0.5*(${C6neg}+${C6pos})
variable C63 equal 0.5*(-1.59301145441202e-07+${C6pos})
variable C63 equal 0.5*(-1.59301145441202e-07+2.10855383154774e-06)

# Delete dir to make sure it is not reused

variable dir delete
# ---- uyz Perturbation
variable dir equal 4
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
variable len0 equal ${lz0}
variable len0 equal 3.55024587356973
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
read_restart restart.equil remap
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1e-06*${len0}
variable delta equal -1e-06*3.55024587356973
if "${dir} == 1" then    "change_box all x delta 0 ${delta} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
change_box all yz delta ${delta} remap units box
change_box all yz delta -3.55024587356973e-06 remap units box
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 -3.55025e-06)
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     100            0   -18.389932    2211.1408    2211.1408    2211.1408    2211.1408 1.1155355e-09 -1.0929411e-09  -0.45987426    3.5502459    3.5502459    3.5502459    44.748172 
     101            0   -20.437162    73528.324    73528.324    73528.324    73528.324 2.3557802e-09 -2.3814106e-09  -0.48592866    3.5502459    3.5502459    3.5502459    44.748172 
     102            0   -24.323622    227844.76    227844.76    227844.76    227844.76 3.181364e-09 -2.3298868e-09  -0.46177141    3.5502459    3.5502459    3.5502459    44.748172 
     103            0   -29.703584    497427.15    497427.15    497427.15    497427.15 3.482556e-10 -5.2240579e-10  -0.22297354    3.5502459    3.5502459    3.5502459    44.748172 
     104            0   -34.705043    897464.89    897464.89    897464.89    897464.89 7.4747203e-10 -2.5367935e-10  -0.28625213    3.5502459    3.5502459    3.5502459    44.748172 
     105            0   -35.829419    1125909.7    1125909.7    1125909.7    1125909.7 -2.314121e-09 2.8201737e-09  0.038944632    3.5502459    3.5502459    3.5502459    44.748172 
     106            0   -35.873597      1164465      1164465      1164465      1164465 -5.1942394e-10 -3.6555966e-11  -0.33678581    3.5502459    3.5502459    3.5502459    44.748172 
     107            0   -35.877962    1176221.8    1176221.8    1176221.8    1176221.8 -6.8250714e-09 8.6650923e-09   0.58437546    3.5502459    3.5502459    3.5502459    44.748172 
     108            0   -35.878471    1180230.8    1180230.8    1180230.8    1180230.8 1.4580869e-08 -1.0490117e-08   -1.9247905    3.5502459    3.5502459    3.5502459    44.748172 
     109            0   -35.878519    1181593.5    1181593.5    1181593.5    1181593.5 8.9713598e-09 -6.9217856e-09   -1.3533876    3.5502459    3.5502459    3.5502459    44.748172 
     110            0   -35.878521    1181522.6    1181522.6    1181522.6    1181522.6 2.2344537e-08 -1.7548885e-08    -2.916187    3.5502459    3.5502459    3.5502459    44.748172 
     111            0   -35.878524    1181343.3    1181343.3    1181343.3    1181343.3 1.4590268e-08 -1.0818498e-08   -1.7832309    3.5502459    3.5502459    3.5502459    44.748172 
     112            0   -35.878526      1182147      1182147      1182147      1182147 -1.9498053e-08 1.5530491e-08    1.8738988    3.5502459    3.5502459    3.5502459    44.748172 
     113            0   -35.878527    1181737.3    1181737.3    1181737.3    1181737.3 -2.7678037e-08 2.2504278e-08    2.7149411    3.5502459    3.5502459    3.5502459    44.748172 
     114            0   -35.878527    1181760.3    1181760.3    1181760.3    1181760.3 -2.6118677e-08 2.0672805e-08    2.7955095    3.5502459    3.5502459    3.5502459    44.748172 
     115            0   -35.878527      1181855      1181855      1181855      1181855 -2.6981136e-08 2.556107e-08    2.4131995    3.5502459    3.5502459    3.5502459    44.748172 
     116            0   -35.878527    1181824.6    1181824.6    1181824.6    1181824.6 -2.7000031e-08 2.0356927e-08    2.5693907    3.5502459    3.5502459    3.5502459    44.748172 
     117            0   -35.878527    1181824.6    1181824.6    1181824.6    1181824.6 -2.7000031e-08 2.0356927e-08    2.5693907    3.5502459    3.5502459    3.5502459    44.748172 
Loop time of 0.017956 on 1 procs for 17 steps with 4 atoms

24.9% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = linesearch alpha is zero
  Energy initial, next-to-last, final = 
        -18.3899317042     -35.8785270683     -35.8785270683
  Force two-norm initial, final = 3.44806 0.000614115
  Force max component initial, final = 0.99537 0.000219287
  Final line search alpha, max atom move = 0.03125 6.85271e-06
  Iterations, force evaluations = 17 55

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.01724    | 0.01724    | 0.01724    |   0.0 | 96.01
Neigh   | 5.0068e-05 | 5.0068e-05 | 5.0068e-05 |   0.0 |  0.28
Comm    | 0.00041056 | 0.00041056 | 0.00041056 |   0.0 |  2.29
Output  | 0.00015378 | 0.00015378 | 0.00015378 |   0.0 |  0.86
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.000102   |            |       |  0.57

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1368 ave 1368 max 1368 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1000 ave 1000 max 1000 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1000
Ave neighs/atom = 250
Neighbor list builds = 1
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1181824.6337838
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1181824.63371164
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1181824.63371563
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -2.70000307499434e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 2.03569266715533e-08
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 2.56939072911233

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 117961349.29705
variable C2neg equal ${d2}
variable C2neg equal 117961349.289854
variable C3neg equal ${d3}
variable C3neg equal 117961349.290246
variable C4neg equal ${d4}
variable C4neg equal 256.939072998689
variable C5neg equal ${d5}
variable C5neg equal 2.1209940239572e-06
variable C6neg equal ${d6}
variable C6neg equal -2.79301176171017e-06

# Reset box and simulation parameters

clear
read_restart restart.equil remap
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1e-06*${len0}
variable delta equal 1e-06*3.55024587356973
if "${dir} == 1" then    "change_box all x delta 0 ${delta} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
change_box all yz delta ${delta} remap units box
change_box all yz delta 3.55024587356973e-06 remap units box
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 3.55025e-06)
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     100            0   -18.389932    2211.1408    2211.1408    2211.1408    2211.1408 1.1689587e-09 -1.2406381e-09   0.45987426    3.5502459    3.5502459    3.5502459    44.748172 
     101            0   -20.437162    73528.324    73528.324    73528.324    73528.324 3.2363433e-09 -2.5409619e-09   0.48592866    3.5502459    3.5502459    3.5502459    44.748172 
     102            0   -24.323622    227844.76    227844.76    227844.76    227844.76 2.7587305e-09 -2.2945054e-09   0.46177141    3.5502459    3.5502459    3.5502459    44.748172 
     103            0   -29.703584    497427.15    497427.15    497427.15    497427.15 1.713048e-09 -3.3419959e-10   0.22297354    3.5502459    3.5502459    3.5502459    44.748172 
     104            0   -34.705043    897464.89    897464.89    897464.89    897464.89 -1.6801811e-10 -2.4822211e-10   0.28625213    3.5502459    3.5502459    3.5502459    44.748172 
     105            0   -35.829419    1125909.7    1125909.7    1125909.7    1125909.7 -3.2377789e-09 8.3833186e-10 -0.038944627    3.5502459    3.5502459    3.5502459    44.748172 
     106            0   -35.873597      1164465      1164465      1164465      1164465 5.2951794e-10 1.2289121e-09   0.33678581    3.5502459    3.5502459    3.5502459    44.748172 
     107            0   -35.877962    1176221.8    1176221.8    1176221.8    1176221.8 -7.040656e-09 8.1034014e-09  -0.58437545    3.5502459    3.5502459    3.5502459    44.748172 
     108            0   -35.878471    1180230.8    1180230.8    1180230.8    1180230.8 1.3869991e-08 -1.2090177e-08    1.9247905    3.5502459    3.5502459    3.5502459    44.748172 
     109            0   -35.878519    1181593.5    1181593.5    1181593.5    1181593.5 7.9825732e-09 -7.0040561e-09    1.3533876    3.5502459    3.5502459    3.5502459    44.748172 
     110            0   -35.878521    1181522.6    1181522.6    1181522.6    1181522.6 2.3007829e-08 -1.972108e-08     2.916187    3.5502459    3.5502459    3.5502459    44.748172 
     111            0   -35.878524    1181343.3    1181343.3    1181343.3    1181343.3 1.2511762e-08 -1.033915e-08    1.7832309    3.5502459    3.5502459    3.5502459    44.748172 
     112            0   -35.878526      1182147      1182147      1182147      1182147 -1.925783e-08 1.5670799e-08   -1.8738988    3.5502459    3.5502459    3.5502459    44.748172 
     113            0   -35.878527    1181737.3    1181737.3    1181737.3    1181737.3 -2.7532019e-08 2.283726e-08   -2.7149411    3.5502459    3.5502459    3.5502459    44.748172 
     114            0   -35.878527    1181760.3    1181760.3    1181760.3    1181760.3 -2.5583092e-08 2.3839339e-08   -2.7955095    3.5502459    3.5502459    3.5502459    44.748172 
     115            0   -35.878527      1181855      1181855      1181855      1181855 -1.8626954e-08 1.4860938e-08   -2.4130743    3.5502459    3.5502459    3.5502459    44.748172 
     116            0   -35.878527    1181824.6    1181824.6    1181824.6    1181824.6 -2.5719371e-08 2.2151804e-08   -2.5693981    3.5502459    3.5502459    3.5502459    44.748172 
     117            0   -35.878527    1181824.6    1181824.6    1181824.6    1181824.6 -2.5719371e-08 2.2151804e-08   -2.5693981    3.5502459    3.5502459    3.5502459    44.748172 
Loop time of 0.0215118 on 1 procs for 17 steps with 4 atoms

21.0% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = linesearch alpha is zero
  Energy initial, next-to-last, final = 
        -18.3899317042     -35.8785270683     -35.8785270683
  Force two-norm initial, final = 3.44806 0.000614199
  Force max component initial, final = 0.99537 0.000219311
  Final line search alpha, max atom move = 0.03125 6.85348e-06
  Iterations, force evaluations = 17 55

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.02079    | 0.02079    | 0.02079    |   0.0 | 96.64
Neigh   | 5.4121e-05 | 5.4121e-05 | 5.4121e-05 |   0.0 |  0.25
Comm    | 0.00041032 | 0.00041032 | 0.00041032 |   0.0 |  1.91
Output  | 0.00015426 | 0.00015426 | 0.00015426 |   0.0 |  0.72
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0001035  |            |       |  0.48

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1368 ave 1368 max 1368 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1000 ave 1000 max 1000 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1000
Ave neighs/atom = 250
Neighbor list builds = 1
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -35.8785270682549
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal 1181824.63550132
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1181824.6355481
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1181824.63547594
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1181824.63547993
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -2.57193712481541e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 2.21518042268779e-08
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal -2.56939805769073

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal -117961349.47348
variable C2pos equal ${d2}
variable C2pos equal -117961349.466284
variable C3pos equal ${d3}
variable C3pos equal -117961349.466676
variable C4pos equal ${d4}
variable C4pos equal 256.939805681617
variable C5pos equal ${d5}
variable C5pos equal -2.30048177948966e-06
variable C6pos equal ${d6}
variable C6pos equal 2.66494581153124e-06

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C14 equal 0.5*(${C1neg}+${C1pos})
variable C14 equal 0.5*(117961349.29705+${C1pos})
variable C14 equal 0.5*(117961349.29705+-117961349.47348)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C24 equal 0.5*(${C2neg}+${C2pos})
variable C24 equal 0.5*(117961349.289854+${C2pos})
variable C24 equal 0.5*(117961349.289854+-117961349.466284)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C34 equal 0.5*(${C3neg}+${C3pos})
variable C34 equal 0.5*(117961349.290246+${C3pos})
variable C34 equal 0.5*(117961349.290246+-117961349.466676)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C44 equal 0.5*(${C4neg}+${C4pos})
variable C44 equal 0.5*(256.939072998689+${C4pos})
variable C44 equal 0.5*(256.939072998689+256.939805681617)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C54 equal 0.5*(${C5neg}+${C5pos})
variable C54 equal 0.5*(2.1209940239572e-06+${C5pos})
variable C54 equal 0.5*(2.1209940239572e-06+-2.30048177948966e-06)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C64 equal 0.5*(${C6neg}+${C6pos})
variable C64 equal 0.5*(-2.79301176171017e-06+${C6pos})
variable C64 equal 0.5*(-2.79301176171017e-06+2.66494581153124e-06)

# Delete dir to make sure it is not reused

variable dir delete
# ---- uxz Perturbation
variable dir equal 5
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
variable len0 equal ${lz0}
variable len0 equal 3.55024587356973
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
read_restart restart.equil remap
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1e-06*${len0}
variable delta equal -1e-06*3.55024587356973
if "${dir} == 1" then    "change_box all x delta 0 ${delta} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
change_box all xz delta ${delta} remap units box
change_box all xz delta -3.55024587356973e-06 remap units box
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -3.55025e-06 0)
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     100            0   -18.389932    2211.1408    2211.1408    2211.1408    2211.1408 1.2947631e-09  -0.45987426 -1.1133966e-09    3.5502459    3.5502459    3.5502459    44.748172 
     101            0   -20.437162    73528.324    73528.324    73528.324    73528.324 2.593906e-09  -0.48592866 -1.9287833e-09    3.5502459    3.5502459    3.5502459    44.748172 
     102            0   -24.323622    227844.76    227844.76    227844.76    227844.76 2.9275165e-09  -0.46177141 -1.6842932e-09    3.5502459    3.5502459    3.5502459    44.748172 
     103            0   -29.703584    497427.15    497427.15    497427.15    497427.15  8.43398e-10  -0.22297354 -1.3569302e-09    3.5502459    3.5502459    3.5502459    44.748172 
     104            0   -34.705043    897464.89    897464.89    897464.89    897464.89 -9.8923289e-10  -0.28625213 2.0582039e-10    3.5502459    3.5502459    3.5502459    44.748172 
     105            0   -35.829419    1125909.7    1125909.7    1125909.7    1125909.7 -2.3642754e-09  0.038944631 3.7055881e-09    3.5502459    3.5502459    3.5502459    44.748172 
     106            0   -35.873597      1164465      1164465      1164465      1164465 -1.6056422e-10  -0.33678581 3.3400472e-10    3.5502459    3.5502459    3.5502459    44.748172 
     107            0   -35.877962    1176221.8    1176221.8    1176221.8    1176221.8 -9.6874829e-09   0.58437546 4.0090082e-09    3.5502459    3.5502459    3.5502459    44.748172 
     108            0   -35.878471    1180230.8    1180230.8    1180230.8    1180230.8 1.090742e-08   -1.9247905 -1.0321586e-08    3.5502459    3.5502459    3.5502459    44.748172 
     109            0   -35.878519    1181593.5    1181593.5    1181593.5    1181593.5 7.1327039e-09   -1.3533876 -6.980918e-09    3.5502459    3.5502459    3.5502459    44.748172 
     110            0   -35.878521    1181522.6    1181522.6    1181522.6    1181522.6 1.9431697e-08    -2.916187 -1.7583375e-08    3.5502459    3.5502459    3.5502459    44.748172 
     111            0   -35.878524    1181343.3    1181343.3    1181343.3    1181343.3 1.0642279e-08   -1.7832309 -1.1954363e-08    3.5502459    3.5502459    3.5502459    44.748172 
     112            0   -35.878526      1182147      1182147      1182147      1182147 -1.6194559e-08    1.8738988 1.7015668e-08    3.5502459    3.5502459    3.5502459    44.748172 
     113            0   -35.878527    1181737.3    1181737.3    1181737.3    1181737.3 -2.1539322e-08    2.7149411 2.0663446e-08    3.5502459    3.5502459    3.5502459    44.748172 
     114            0   -35.878527    1181760.3    1181760.3    1181760.3    1181760.3 -2.1843647e-08    2.7955095 2.2847016e-08    3.5502459    3.5502459    3.5502459    44.748172 
     115            0   -35.878527      1181855      1181855      1181855      1181855 -2.2624529e-08    2.4131921 2.1472841e-08    3.5502459    3.5502459    3.5502459    44.748172 
     116            0   -35.878527    1181824.6    1181824.6    1181824.6    1181824.6 -2.1719835e-08    2.5693912 2.0296413e-08    3.5502459    3.5502459    3.5502459    44.748172 
     117            0   -35.878527    1181824.6    1181824.6    1181824.6    1181824.6 -2.1719835e-08    2.5693912 2.0296413e-08    3.5502459    3.5502459    3.5502459    44.748172 
Loop time of 0.015723 on 1 procs for 17 steps with 4 atoms

28.7% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = linesearch alpha is zero
  Energy initial, next-to-last, final = 
        -18.3899317042     -35.8785270683     -35.8785270683
  Force two-norm initial, final = 3.44806 0.00061412
  Force max component initial, final = 0.99537 0.000219288
  Final line search alpha, max atom move = 0.03125 6.85275e-06
  Iterations, force evaluations = 17 55

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.014961   | 0.014961   | 0.014961   |   0.0 | 95.16
Neigh   | 5.0068e-05 | 5.0068e-05 | 5.0068e-05 |   0.0 |  0.32
Comm    | 0.00042081 | 0.00042081 | 0.00042081 |   0.0 |  2.68
Output  | 0.0001781  | 0.0001781  | 0.0001781  |   0.0 |  1.13
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0001125  |            |       |  0.72

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1368 ave 1368 max 1368 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1000 ave 1000 max 1000 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1000
Ave neighs/atom = 250
Neighbor list builds = 1
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1181824.63380463
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1181824.63389944
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1181824.63381993
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -2.17198349421963e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 2.56939117544893
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 2.02964127920057e-08

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 117961349.299133
variable C2neg equal ${d2}
variable C2neg equal 117961349.308634
variable C3neg equal ${d3}
variable C3neg equal 117961349.300676
variable C4neg equal ${d4}
variable C4neg equal 2.11709716821486e-06
variable C5neg equal ${d5}
variable C5neg equal 256.939117630194
variable C6neg equal ${d6}
variable C6neg equal -2.26499218093546e-06

# Reset box and simulation parameters

clear
read_restart restart.equil remap
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1e-06*${len0}
variable delta equal 1e-06*3.55024587356973
if "${dir} == 1" then    "change_box all x delta 0 ${delta} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
change_box all xz delta ${delta} remap units box
change_box all xz delta 3.55024587356973e-06 remap units box
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 3.55025e-06 0)
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     100            0   -18.389932    2211.1408    2211.1408    2211.1408    2211.1408 1.1404276e-09   0.45987426 -1.3500238e-09    3.5502459    3.5502459    3.5502459    44.748172 
     101            0   -20.437162    73528.324    73528.324    73528.324    73528.324 2.8649702e-09   0.48592866 -2.5458984e-09    3.5502459    3.5502459    3.5502459    44.748172 
     102            0   -24.323622    227844.76    227844.76    227844.76    227844.76 3.2004784e-09   0.46177141 -2.3602106e-09    3.5502459    3.5502459    3.5502459    44.748172 
     103            0   -29.703584    497427.15    497427.15    497427.15    497427.15 1.5365369e-09   0.22297354 2.7536641e-10    3.5502459    3.5502459    3.5502459    44.748172 
     104            0   -34.705043    897464.89    897464.89    897464.89    897464.89 1.2309739e-09   0.28625213 7.1476557e-11    3.5502459    3.5502459    3.5502459    44.748172 
     105            0   -35.829419    1125909.7    1125909.7    1125909.7    1125909.7 -4.2666789e-09 -0.038944625 3.9759733e-09    3.5502459    3.5502459    3.5502459    44.748172 
     106            0   -35.873597      1164465      1164465      1164465      1164465 6.4908166e-10   0.33678581 -9.050014e-11    3.5502459    3.5502459    3.5502459    44.748172 
     107            0   -35.877962    1176221.8    1176221.8    1176221.8    1176221.8 -7.1500321e-09  -0.58437545 4.9231958e-09    3.5502459    3.5502459    3.5502459    44.748172 
     108            0   -35.878471    1180230.8    1180230.8    1180230.8    1180230.8 1.2917513e-08    1.9247905 -1.0719819e-08    3.5502459    3.5502459    3.5502459    44.748172 
     109            0   -35.878519    1181593.5    1181593.5    1181593.5    1181593.5 8.7133012e-09    1.3533876 -7.5357834e-09    3.5502459    3.5502459    3.5502459    44.748172 
     110            0   -35.878521    1181522.6    1181522.6    1181522.6    1181522.6 2.1600091e-08     2.916187 -1.7925333e-08    3.5502459    3.5502459    3.5502459    44.748172 
     111            0   -35.878524    1181343.3    1181343.3    1181343.3    1181343.3 1.2954734e-08    1.7832309 -9.6215789e-09    3.5502459    3.5502459    3.5502459    44.748172 
     112            0   -35.878526      1182147      1182147      1182147      1182147 -1.7666505e-08   -1.8738988 1.4770883e-08    3.5502459    3.5502459    3.5502459    44.748172 
     113            0   -35.878527    1181737.3    1181737.3    1181737.3    1181737.3 -2.6408946e-08   -2.7149411 2.2651013e-08    3.5502459    3.5502459    3.5502459    44.748172 
     114            0   -35.878527    1181760.3    1181760.3    1181760.3    1181760.3 -2.7208156e-08   -2.7955095 2.4408481e-08    3.5502459    3.5502459    3.5502459    44.748172 
     115            0   -35.878527      1181855      1181855      1181855      1181855 -1.8266539e-08   -2.4130016  1.58431e-08    3.5502459    3.5502459    3.5502459    44.748172 
     116            0   -35.878527    1181824.6    1181824.6    1181824.6    1181824.6 -2.5470378e-08   -2.5694023 1.9532163e-08    3.5502459    3.5502459    3.5502459    44.748172 
     117            0   -35.878527    1181824.6    1181824.6    1181824.6    1181824.6 -2.5470378e-08   -2.5694023 1.9532163e-08    3.5502459    3.5502459    3.5502459    44.748172 
Loop time of 0.013566 on 1 procs for 17 steps with 4 atoms

32.2% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = linesearch alpha is zero
  Energy initial, next-to-last, final = 
        -18.3899317042     -35.8785270683     -35.8785270683
  Force two-norm initial, final = 3.44806 0.000614247
  Force max component initial, final = 0.99537 0.000219326
  Final line search alpha, max atom move = 0.03125 6.85393e-06
  Iterations, force evaluations = 17 55

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.0036757  | 0.0036757  | 0.0036757  |   0.0 | 27.09
Neigh   | 4.9829e-05 | 4.9829e-05 | 4.9829e-05 |   0.0 |  0.37
Comm    | 0.00038195 | 0.00038195 | 0.00038195 |   0.0 |  2.82
Output  | 0.0093505  | 0.0093505  | 0.0093505  |   0.0 | 68.93
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.000108   |            |       |  0.80

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1368 ave 1368 max 1368 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1000 ave 1000 max 1000 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1000
Ave neighs/atom = 250
Neighbor list builds = 1
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -35.8785270682553
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal 1181824.63652535
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1181824.63648863
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1181824.63658347
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1181824.63650396
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -2.54703779342745e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal -2.56940232058704
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 1.9532162785563e-08

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal -117961349.567533
variable C2pos equal ${d2}
variable C2pos equal -117961349.577037
variable C3pos equal ${d3}
variable C3pos equal -117961349.569079
variable C4pos equal ${d4}
variable C4pos equal -2.04067216757059e-06
variable C5pos equal ${d5}
variable C5pos equal 256.940231973403
variable C6pos equal ${d6}
variable C6pos equal 2.64004648014327e-06

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C15 equal 0.5*(${C1neg}+${C1pos})
variable C15 equal 0.5*(117961349.299133+${C1pos})
variable C15 equal 0.5*(117961349.299133+-117961349.567533)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C25 equal 0.5*(${C2neg}+${C2pos})
variable C25 equal 0.5*(117961349.308634+${C2pos})
variable C25 equal 0.5*(117961349.308634+-117961349.577037)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C35 equal 0.5*(${C3neg}+${C3pos})
variable C35 equal 0.5*(117961349.300676+${C3pos})
variable C35 equal 0.5*(117961349.300676+-117961349.569079)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C45 equal 0.5*(${C4neg}+${C4pos})
variable C45 equal 0.5*(2.11709716821486e-06+${C4pos})
variable C45 equal 0.5*(2.11709716821486e-06+-2.04067216757059e-06)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C55 equal 0.5*(${C5neg}+${C5pos})
variable C55 equal 0.5*(256.939117630194+${C5pos})
variable C55 equal 0.5*(256.939117630194+256.940231973403)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C65 equal 0.5*(${C6neg}+${C6pos})
variable C65 equal 0.5*(-2.26499218093546e-06+${C6pos})
variable C65 equal 0.5*(-2.26499218093546e-06+2.64004648014327e-06)

# Delete dir to make sure it is not reused

variable dir delete
# ---- uxy Perturbation
variable dir equal 6
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"
variable len0 equal ${ly0}
variable len0 equal 3.55024587356922

# Reset box and simulation parameters

clear
read_restart restart.equil remap
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1e-06*${len0}
variable delta equal -1e-06*3.55024587356922
if "${dir} == 1" then    "change_box all x delta 0 ${delta} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"
change_box all xy delta ${delta} remap units box
change_box all xy delta -3.55024587356922e-06 remap units box
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (-3.55025e-06 -0 0)

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     100            0   -18.389932    2211.1408    2211.1408    2211.1408    2211.1408  -0.45987426 -1.441948e-09 -1.1664775e-09    3.5502459    3.5502459    3.5502459    44.748172 
     101            0   -20.437162    73528.324    73528.324    73528.324    73528.324  -0.48592866 -2.4394859e-09 -1.5474281e-09    3.5502459    3.5502459    3.5502459    44.748172 
     102            0   -24.323622    227844.76    227844.76    227844.76    227844.76  -0.46177141 -3.6540323e-09 -3.1075932e-09    3.5502459    3.5502459    3.5502459    44.748172 
     103            0   -29.703584    497427.15    497427.15    497427.15    497427.15  -0.22297354 -1.2522324e-09 -1.6400349e-09    3.5502459    3.5502459    3.5502459    44.748172 
     104            0   -34.705043    897464.89    897464.89    897464.89    897464.89  -0.28625214 -5.3918392e-10 -7.5566633e-11    3.5502459    3.5502459    3.5502459    44.748172 
     105            0   -35.829419    1125909.7    1125909.7    1125909.7    1125909.7  0.038944645 1.7932408e-09 1.4391421e-09    3.5502459    3.5502459    3.5502459    44.748172 
     106            0   -35.873597      1164465      1164465      1164465      1164465   -0.3367858 7.4720318e-10 2.4087683e-10    3.5502459    3.5502459    3.5502459    44.748172 
     107            0   -35.877962    1176221.8    1176221.8    1176221.8    1176221.8   0.58437545 6.3027166e-09 7.2857781e-09    3.5502459    3.5502459    3.5502459    44.748172 
     108            0   -35.878471    1180230.8    1180230.8    1180230.8    1180230.8   -1.9247905 -1.2983216e-08 -1.2680259e-08    3.5502459    3.5502459    3.5502459    44.748172 
     109            0   -35.878519    1181593.5    1181593.5    1181593.5    1181593.5   -1.3533876 -9.9885251e-09 -6.2259949e-09    3.5502459    3.5502459    3.5502459    44.748172 
     110            0   -35.878521    1181522.6    1181522.6    1181522.6    1181522.6    -2.916187 -2.1306912e-08 -1.9070068e-08    3.5502459    3.5502459    3.5502459    44.748172 
     111            0   -35.878524    1181343.3    1181343.3    1181343.3    1181343.3   -1.7832309 -1.1362221e-08 -9.6312667e-09    3.5502459    3.5502459    3.5502459    44.748172 
     112            0   -35.878526      1182147      1182147      1182147      1182147    1.8738988 1.8276427e-08 1.5632623e-08    3.5502459    3.5502459    3.5502459    44.748172 
     113            0   -35.878527    1181737.3    1181737.3    1181737.3    1181737.3    2.7149411 2.6824349e-08 2.1451276e-08    3.5502459    3.5502459    3.5502459    44.748172 
     114            0   -35.878527    1181760.3    1181760.3    1181760.3    1181760.3    2.7955095 2.701374e-08 2.4833281e-08    3.5502459    3.5502459    3.5502459    44.748172 
     115            0   -35.878527      1181855      1181855      1181855      1181855    2.4131225 1.6751051e-08 1.2360001e-08    3.5502459    3.5502459    3.5502459    44.748172 
     116            0   -35.878527    1181824.6    1181824.6    1181824.6    1181824.6    2.5693952 2.4775905e-08 2.1991648e-08    3.5502459    3.5502459    3.5502459    44.748172 
     117            0   -35.878527    1181824.6    1181824.6    1181824.6    1181824.6    2.5693952 2.4775905e-08 2.1991648e-08    3.5502459    3.5502459    3.5502459    44.748172 
Loop time of 0.00427485 on 1 procs for 17 steps with 4 atoms

98.6% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = linesearch alpha is zero
  Energy initial, next-to-last, final = 
        -18.3899317042     -35.8785270683     -35.8785270683
  Force two-norm initial, final = 3.44806 0.000614167
  Force max component initial, final = 0.99537 0.000219302
  Final line search alpha, max atom move = 0.03125 6.85319e-06
  Iterations, force evaluations = 17 55

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.0036039  | 0.0036039  | 0.0036039  |   0.0 | 84.31
Neigh   | 4.9114e-05 | 4.9114e-05 | 4.9114e-05 |   0.0 |  1.15
Comm    | 0.00036287 | 0.00036287 | 0.00036287 |   0.0 |  8.49
Output  | 0.00015378 | 0.00015378 | 0.00015378 |   0.0 |  3.60
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0001051  |            |       |  2.46

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1368 ave 1368 max 1368 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1000 ave 1000 max 1000 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1000
Ave neighs/atom = 250
Neighbor list builds = 1
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1181824.63478494
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1181824.63480348
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1181824.63487654
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 2.56939520501537
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 2.47759045712675e-08
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 2.19916484336576e-08

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 117961349.397164
variable C2neg equal ${d2}
variable C2neg equal 117961349.399038
variable C3neg equal ${d3}
variable C3neg equal 117961349.406337
variable C4neg equal ${d4}
variable C4neg equal 2.28662073238005e-06
variable C5neg equal ${d5}
variable C5neg equal 2.56289181392862e-06
variable C6neg equal ${d6}
variable C6neg equal 256.939520408528

# Reset box and simulation parameters

clear
read_restart restart.equil remap
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (0 -0 0)
  1 by 1 by 1 MPI processor grid
  4 atoms
include potential.mod
mass 1 58.6934

group Ni type 1
4 atoms in group Ni

pair_style eam/alloy
pair_coeff * * /home/sullberg/repos/pypospack/examples/Ni__eam__born_exp_rose/01_preconditioning_3.5NN/rank_34/Ni_fcc.lmps_elastic/Ni.eam.alloy Ni

neighbor 1.0 bin
neigh_modify every 1 delay 0 check yes
thermo	1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1e-06*${len0}
variable delta equal 1e-06*3.55024587356922
if "${dir} == 1" then    "change_box all x delta 0 ${delta} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"
change_box all xy delta ${delta} remap units box
change_box all xy delta 3.55024587356922e-06 remap units box
  triclinic box = (-0.0167729 -0.0167729 -0.0167729) to (3.53347 3.53347 3.53347) with tilt (3.55025e-06 -0 0)

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 11
  ghost atom cutoff = 11
  binsize = 5.5, bins = 1 1 1
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair eam/alloy, perpetual
      attributes: half, newton on
      pair build: half/bin/newton/tri
      stencil: half/bin/3d/newton/tri
      bin: standard
Per MPI rank memory allocation (min/avg/max) = 4.182 | 4.182 | 4.182 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     100            0   -18.389932    2211.1408    2211.1408    2211.1408    2211.1408   0.45987426 -8.6872964e-10 -8.6577589e-10    3.5502459    3.5502459    3.5502459    44.748172 
     101            0   -20.437162    73528.324    73528.324    73528.324    73528.324   0.48592866 -2.2178706e-09 -2.2351042e-09    3.5502459    3.5502459    3.5502459    44.748172 
     102            0   -24.323622    227844.76    227844.76    227844.76    227844.76   0.46177141 -2.2332112e-09 -2.8215555e-09    3.5502459    3.5502459    3.5502459    44.748172 
     103            0   -29.703584    497427.15    497427.15    497427.15    497427.15   0.22297354 -1.8984501e-09 -4.7660519e-10    3.5502459    3.5502459    3.5502459    44.748172 
     104            0   -34.705043    897464.89    897464.89    897464.89    897464.89   0.28625214 -2.1835572e-09 -9.6901544e-11    3.5502459    3.5502459    3.5502459    44.748172 
     105            0   -35.829419    1125909.7    1125909.7    1125909.7    1125909.7 -0.038944652 3.4535791e-09 1.3649187e-09    3.5502459    3.5502459    3.5502459    44.748172 
     106            0   -35.873597      1164465      1164465      1164465      1164465    0.3367858 3.8243155e-10 6.2700008e-10    3.5502459    3.5502459    3.5502459    44.748172 
     107            0   -35.877962    1176221.8    1176221.8    1176221.8    1176221.8  -0.58437546 7.200054e-09 7.3329028e-09    3.5502459    3.5502459    3.5502459    44.748172 
     108            0   -35.878471    1180230.8    1180230.8    1180230.8    1180230.8    1.9247905 -1.1402601e-08 -9.2312707e-09    3.5502459    3.5502459    3.5502459    44.748172 
     109            0   -35.878519    1181593.5    1181593.5    1181593.5    1181593.5    1.3533876 -6.9743872e-09 -7.1457996e-09    3.5502459    3.5502459    3.5502459    44.748172 
     110            0   -35.878521    1181522.6    1181522.6    1181522.6    1181522.6     2.916187 -1.853837e-08 -1.5683634e-08    3.5502459    3.5502459    3.5502459    44.748172 
     111            0   -35.878524    1181343.3    1181343.3    1181343.3    1181343.3    1.7832309 -1.0530605e-08 -1.0262727e-08    3.5502459    3.5502459    3.5502459    44.748172 
     112            0   -35.878526      1182147      1182147      1182147      1182147   -1.8738988 1.6252864e-08 1.4434446e-08    3.5502459    3.5502459    3.5502459    44.748172 
     113            0   -35.878527    1181737.3    1181737.3    1181737.3    1181737.3    -2.714941 1.998853e-08 2.0362626e-08    3.5502459    3.5502459    3.5502459    44.748172 
     114            0   -35.878527    1181760.3    1181760.3    1181760.3    1181760.3   -2.7955095 2.2879697e-08 1.9728488e-08    3.5502459    3.5502459    3.5502459    44.748172 
     115            0   -35.878527      1181855      1181855      1181855      1181855   -2.4133187 2.0385122e-08 2.1459753e-08    3.5502459    3.5502459    3.5502459    44.748172 
     116            0   -35.878527    1181824.6    1181824.6    1181824.6    1181824.6   -2.5693837 1.9383403e-08 1.7613713e-08    3.5502459    3.5502459    3.5502459    44.748172 
     117            0   -35.878527    1181824.6    1181824.6    1181824.6    1181824.6   -2.5693837 1.9383403e-08 1.7613713e-08    3.5502459    3.5502459    3.5502459    44.748172 
Loop time of 0.00724602 on 1 procs for 17 steps with 4 atoms

58.5% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = linesearch alpha is zero
  Energy initial, next-to-last, final = 
        -18.3899317042     -35.8785270683     -35.8785270683
  Force two-norm initial, final = 3.44806 0.000614036
  Force max component initial, final = 0.99537 0.000219263
  Final line search alpha, max atom move = 0.03125 6.85197e-06
  Iterations, force evaluations = 17 55

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.0065587  | 0.0065587  | 0.0065587  |   0.0 | 90.51
Neigh   | 4.9114e-05 | 4.9114e-05 | 4.9114e-05 |   0.0 |  0.68
Comm    | 0.00037742 | 0.00037742 | 0.00037742 |   0.0 |  5.21
Output  | 0.00015807 | 0.00015807 | 0.00015807 |   0.0 |  2.18
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0001028  |            |       |  1.42

Nlocal:    4 ave 4 max 4 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    1368 ave 1368 max 1368 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    1000 ave 1000 max 1000 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 1000
Ave neighs/atom = 250
Neighbor list builds = 1
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -35.8785270682553
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal 1181824.63205682
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1181824.6320201
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1181824.63203865
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1181824.63211172
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -2.56938372306029
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 1.93834028210892e-08
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 1.76137131528213e-08

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal -117961349.12068
variable C2pos equal ${d2}
variable C2pos equal -117961349.122555
variable C3pos equal ${d3}
variable C3pos equal -117961349.129855
variable C4pos equal ${d4}
variable C4pos equal -1.84882720429642e-06
variable C5pos equal ${d5}
variable C5pos equal -2.02364163891079e-06
variable C6pos equal ${d6}
variable C6pos equal 256.938372399038

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C16 equal 0.5*(${C1neg}+${C1pos})
variable C16 equal 0.5*(117961349.397164+${C1pos})
variable C16 equal 0.5*(117961349.397164+-117961349.12068)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C26 equal 0.5*(${C2neg}+${C2pos})
variable C26 equal 0.5*(117961349.399038+${C2pos})
variable C26 equal 0.5*(117961349.399038+-117961349.122555)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C36 equal 0.5*(${C3neg}+${C3pos})
variable C36 equal 0.5*(117961349.406337+${C3pos})
variable C36 equal 0.5*(117961349.406337+-117961349.129855)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C46 equal 0.5*(${C4neg}+${C4pos})
variable C46 equal 0.5*(2.28662073238005e-06+${C4pos})
variable C46 equal 0.5*(2.28662073238005e-06+-1.84882720429642e-06)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C56 equal 0.5*(${C5neg}+${C5pos})
variable C56 equal 0.5*(2.56289181392862e-06+${C5pos})
variable C56 equal 0.5*(2.56289181392862e-06+-2.02364163891079e-06)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C66 equal 0.5*(${C6neg}+${C6pos})
variable C66 equal 0.5*(256.939520408528+${C6pos})
variable C66 equal 0.5*(256.939520408528+256.938372399038)

# Delete dir to make sure it is not reused

variable dir delete

# ---- Output final values
variable C11all equal ${C11}
variable C11all equal -332.498212002218
variable C22all equal ${C22}
variable C22all equal -331.727027498186
variable C33all equal ${C33}
variable C33all equal -331.97108899802
variable C12all equal 0.5*(${C12}+${C21})
variable C12all equal 0.5*(654.523863002658+${C21})
variable C12all equal 0.5*(654.523863002658+653.832930497825)
variable C13all equal 0.5*(${C13}+${C31})
variable C13all equal 0.5*(654.286206498742+${C31})
variable C13all equal 0.5*(654.286206498742+653.832786999643)
variable C23all equal 0.5*(${C23}+${C32})
variable C23all equal 0.5*(654.286766499281+${C32})
variable C23all equal 0.5*(654.286766499281+654.524278998375)
variable C44all equal ${C44}
variable C44all equal 256.939439340153
variable C55all equal ${C55}
variable C55all equal 256.939674801799
variable C66all equal ${C66}
variable C66all equal 256.938946403783
variable C14all equal 0.5*(${C14}+${C41})
variable C14all equal 0.5*(-0.0882150009274483+${C41})
variable C14all equal 0.5*(-0.0882150009274483+-6.80253283523494e-07)
variable C15all equal 0.5*(${C15}+${C51})
variable C15all equal 0.5*(-0.134199999272823+${C51})
variable C15all equal 0.5*(-0.134199999272823+-9.81791388701267e-07)
variable C16all equal 0.5*(${C16}+${C61})
variable C16all equal 0.5*(0.138241998851299+${C61})
variable C16all equal 0.5*(0.138241998851299+1.00632237000517e-06)
variable C24all equal 0.5*(${C24}+${C42})
variable C24all equal 0.5*(-0.0882150009274483+${C42})
variable C24all equal 0.5*(-0.0882150009274483+-6.29657105147225e-07)
variable C25all equal 0.5*(${C25}+${C52})
variable C25all equal 0.5*(-0.134201504290104+${C52})
variable C25all equal 0.5*(-0.134201504290104+-8.16231496051363e-07)
variable C26all equal 0.5*(${C26}+${C62})
variable C26all equal 0.5*(0.138241499662399+${C62})
variable C26all equal 0.5*(0.138241499662399+9.11395153901475e-07)
variable C34all equal 0.5*(${C34}+${C43})
variable C34all equal 0.5*(-0.0882150009274483+${C43})
variable C34all equal 0.5*(-0.0882150009274483+-4.78415650600142e-07)
variable C35all equal 0.5*(${C35}+${C53})
variable C35all equal 0.5*(-0.134201496839523+${C53})
variable C35all equal 0.5*(-0.134201496839523+-8.43738932536306e-07)
variable C36all equal 0.5*(${C36}+${C63})
variable C36all equal 0.5*(0.138240993022919+${C63})
variable C36all equal 0.5*(0.138240993022919+9.74626343053269e-07)
variable C45all equal 0.5*(${C45}+${C54})
variable C45all equal 0.5*(3.8212500322135e-08+${C54})
variable C45all equal 0.5*(3.8212500322135e-08+-8.974387776623e-08)
variable C46all equal 0.5*(${C46}+${C64})
variable C46all equal 0.5*(2.18896764041815e-07+${C64})
variable C46all equal 0.5*(2.18896764041815e-07+-6.40329750894651e-08)
variable C56all equal 0.5*(${C56}+${C65})
variable C56all equal 0.5*(2.69625087508915e-07+${C65})
variable C56all equal 0.5*(2.69625087508915e-07+1.87527149603905e-07)

print "c11 = ${C11all} ${cunits}"
c11 = -332.498212002218 GPa
print "c22 = ${C22all} ${cunits}"
c22 = -331.727027498186 GPa
print "c33 = ${C33all} ${cunits}"
c33 = -331.97108899802 GPa
print "c12 = ${C12all} ${cunits}"
c12 = 654.178396750242 GPa
print "c13 = ${C13all} ${cunits}"
c13 = 654.059496749192 GPa
print "c23 = ${C23all} ${cunits}"
c23 = 654.405522748828 GPa
print "c44 = ${C44all} ${cunits}"
c44 = 256.939439340153 GPa
print "c55 = ${C55all} ${cunits}"
c55 = 256.939674801799 GPa
print "c66 = ${C66all} ${cunits}"
c66 = 256.938946403783 GPa
print "c14 = ${C14all} ${cunits}"
c14 = -0.0441078405903659 GPa
print "c15 = ${C15all} ${cunits}"
c15 = -0.0671004905321058 GPa
print "c16 = ${C16all} ${cunits}"
c16 = 0.0691215025868345 GPa
print "c24 = ${C24all} ${cunits}"
c24 = -0.0441078152922767 GPa
print "c25 = ${C25all} ${cunits}"
c25 = -0.0671011602608 GPa
print "c26 = ${C26all} ${cunits}"
c26 = 0.0691212055287764 GPa
print "c34 = ${C34all} ${cunits}"
c34 = -0.0441077396715494 GPa
print "c35 = ${C35all} ${cunits}"
c35 = -0.0671011702892278 GPa
print "c36 = ${C36all} ${cunits}"
c36 = 0.069120983824631 GPa
print "c45 = ${C45all} ${cunits}"
c45 = -2.57656887220475e-08 GPa
print "c46 = ${C46all} ${cunits}"
c46 = 7.74318944761749e-08 GPa
print "c56 = ${C56all} ${cunits}"
c56 = 2.2857611855641e-07 GPa
print "lammps_sim_done"
lammps_sim_done
Total wall time: 0:00:00
